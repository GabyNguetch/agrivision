================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\app\map\[id]\page.tsx
================================================================================

'use client';

import { useState, useEffect } from 'react';
import dynamic from 'next/dynamic';
import Link from 'next/link';
import { useSearchParams } from 'next/navigation';
import {
  ArrowLeft, Leaf, MapPin, Package, Wheat, TrendingUp,
  Users, BarChart2, Layers, AlertCircle, ExternalLink,
  Building2, Factory, Store, TrendingDown, Calendar,
} from 'lucide-react';
import ThemeToggle from '@/components/ThemeToggle';
import type { MapLevel } from '@/types/api';
import {
  getRegion, getDepartement, getCommune,
  getRegionProductions, getDepartementProductions, getCommuneProductions,
  getRegionDepartements, getDepartementCommunes, getCommuneInfrastructures,
  getRegionsGeoJSON, getDepartementsGeoJSON, getCommunesGeoJSON,
  getFilieres, getCategories, getProduits,
} from '@/lib/api';

const DetailMap = dynamic(() => import('@/components/DetailMap'), {
  ssr: false,
  loading: () => (
    <div className="w-full h-full bg-gray-100 dark:bg-gray-900 flex items-center justify-center rounded-xl">
      <div className="inline-block w-10 h-10 border-3 border-green-500 border-t-transparent rounded-full animate-spin" />
    </div>
  ),
});

export default function DetailPage({ params }: { params: { id: string } }) {
  const id = Number(params.id);
  const searchParams = useSearchParams();
  const level = (searchParams.get('level') || 'regions') as MapLevel;

  const [entity, setEntity] = useState<any>(null);
  const [productions, setProductions] = useState<any[]>([]);
  const [children, setChildren] = useState<any[]>([]);
  const [infrastructures, setInfrastructures] = useState<any[]>([]);
  const [filieres, setFilieres] = useState<any[]>([]);
  const [categories, setCategories] = useState<any[]>([]);
  const [produits, setProduits] = useState<any[]>([]);
  const [geoData, setGeoData] = useState<any>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    let cancelled = false;

    (async () => {
      console.log(`📄 [DetailPage] Loading detail for id=${id} level=${level}`);
      setLoading(true);
      setError(null);

      try {
        let ent: any, prods: any[], kids: any[], infras: any[], geo: any;
        let fils: any, cats: any, prts: any;

        // Charger les données de base
        const [filieresData, categoriesData, produitsData] = await Promise.all([
          getFilieres(0, 100),
          getCategories(0, 100),
          getProduits(0, 100),
        ]);

        fils = filieresData.items;
        cats = categoriesData.items;
        prts = produitsData.items;

        switch (level) {
          case 'regions': {
            [ent, prods, kids, geo] = await Promise.all([
              getRegion(id),
              getRegionProductions(id),
              getRegionDepartements(id),
              getRegionsGeoJSON(),
            ]);
            infras = [];
            break;
          }
          case 'departements': {
            [ent, prods, kids, geo] = await Promise.all([
              getDepartement(id),
              getDepartementProductions(id),
              getDepartementCommunes(id),
              getDepartementsGeoJSON(),
            ]);
            infras = [];
            break;
          }
          case 'communes': {
            [ent, prods, infras, geo] = await Promise.all([
              getCommune(id),
              getCommuneProductions(id),
              getCommuneInfrastructures(id),
              getCommunesGeoJSON(),
            ]);
            kids = [];
            break;
          }
          default:
            throw new Error('Level inconnu');
        }

        if (cancelled) return;

        setEntity(ent);
        setProductions(Array.isArray(prods) ? prods : (prods?.items || []));
        setChildren(Array.isArray(kids) ? kids : (kids?.items || []));
        setInfrastructures(Array.isArray(infras) ? infras : (infras?.items || []));
        setFilieres(fils);
        setCategories(cats);
        setProduits(prts);
        setGeoData(geo);

        console.log(`✅ [DetailPage] All data loaded for ${ent?.nom}`);
      } catch (e: any) {
        if (!cancelled) {
          console.error('❌ [DetailPage] fetch error', e);
          setError(e.message || 'Erreur de chargement');
        }
      } finally {
        if (!cancelled) setLoading(false);
      }
    })();

    return () => { cancelled = true; };
  }, [id, level]);

  // ── Helpers ──────────────────────────────────────────────────────────────
  const fmt = (n: number | null | undefined) =>
    n != null ? new Intl.NumberFormat('fr-FR').format(n) : '—';
  const fmtFCFA = (n: number | null | undefined) =>
    n != null ? `${new Intl.NumberFormat('fr-FR').format(n)} FCFA` : '—';

  const totalQuantite = productions.reduce((s, p) => s + (p.quantite || 0), 0);
  const totalValeur = productions.reduce((s, p) => s + (p.valeur_fcfa || 0), 0);
  const totalProducteurs = productions.reduce((s, p) => s + (p.nombre_producteurs || 0), 0);
  const totalSuperficie = productions.reduce((s, p) => s + (p.superficie_ha || 0), 0);

  const childLabel = level === 'regions' ? 'Départements' : level === 'departements' ? 'Communes' : '';
  
  const infraIconMap: Record<string, string> = {
    marché: '🏪',
    entrepôt: '🏭',
    coopérative: '🤝',
    usine_transformation: '⚙️',
    point_collecte: '📦',
  };

  // Grouper productions par filière
  const productionsByFiliere = productions.reduce((acc: any, prod: any) => {
    const produit = produits.find(p => p.id === prod.produit_id);
    if (!produit) return acc;
    
    const categorie = categories.find(c => c.id === produit.categorie_id);
    if (!categorie) return acc;
    
    const filiere = filieres.find(f => f.id === categorie.filiere_id);
    if (!filiere) return acc;

    const key = filiere.nom;
    if (!acc[key]) {
      acc[key] = { filiere, total: 0, count: 0 };
    }
    acc[key].total += prod.quantite || 0;
    acc[key].count += 1;
    return acc;
  }, {});

  if (error) {
    return (
      <div className="min-h-screen bg-white dark:bg-gray-950 flex items-center justify-center p-6">
        <div className="text-center max-w-md">
          <AlertCircle className="w-16 h-16 text-red-500 mx-auto mb-4" />
          <h2 className="text-xl font-bold text-gray-900 dark:text-white mb-2">Erreur</h2>
          <p className="text-gray-500 dark:text-gray-400 mb-6">{error}</p>
          <Link href="/map" className="inline-flex items-center gap-2 px-5 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition-all">
            <ArrowLeft className="w-4 h-4" /> Retour à la carte
          </Link>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-950 text-gray-900 dark:text-gray-100">
      {/* Header */}
      <header className="sticky top-0 z-30 bg-white/90 dark:bg-gray-950/90 backdrop-blur-md border-b border-gray-200 dark:border-gray-800">
        <div className="max-w-7xl mx-auto px-4 md:px-6 py-3 flex items-center justify-between">
          <div className="flex items-center gap-3">
            <Link href="/map" className="p-1.5 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all">
              <ArrowLeft className="w-5 h-5 text-gray-600 dark:text-gray-300" />
            </Link>
            <div className="flex items-center gap-2">
              <div className="w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-600 rounded-lg flex items-center justify-center">
                <Leaf className="w-4 h-4 text-white" />
              </div>
              <div>
                <span className="text-sm font-bold text-gray-900 dark:text-white">
                  {loading ? '…' : entity?.nom}
                </span>
                <span className="text-xs text-gray-400 dark:text-gray-500 ml-2 capitalize">
                  ({level.slice(0, -1)})
                </span>
              </div>
            </div>
          </div>
          <ThemeToggle />
        </div>
      </header>

      {loading ? (
        /* Skeleton */
        <div className="max-w-7xl mx-auto px-4 md:px-6 py-8 space-y-6">
          <div className="h-80 bg-gray-200 dark:bg-gray-800 rounded-2xl animate-pulse" />
          <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
            {[1, 2, 3, 4].map(i => (
              <div key={i} className="h-32 bg-gray-200 dark:bg-gray-800 rounded-xl animate-pulse" />
            ))}
          </div>
        </div>
      ) : (
        <main className="max-w-7xl mx-auto px-4 md:px-6 py-6 space-y-6">
          {/* Carte hero */}
          <div className="anim-fadeIn rounded-2xl overflow-hidden shadow-xl border border-gray-200 dark:border-gray-800" style={{ height: '400px' }}>
            <DetailMap geoData={geoData} targetId={id} />
          </div>

          {/* KPI Cards */}
          <div className="grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4">
            {[
              { label: 'Population', value: fmt(entity?.population), icon: Users, color: 'from-blue-400 to-blue-600', delay: 'delay-50' },
              { label: 'Superficie', value: entity?.superficie_km2 ? `${fmt(entity.superficie_km2)} km²` : '—', icon: Layers, color: 'from-emerald-400 to-emerald-600', delay: 'delay-100' },
              { label: 'Productions', value: fmt(productions.length), icon: Wheat, color: 'from-green-400 to-green-600', delay: 'delay-150' },
              { label: 'Valeur totale', value: fmtFCFA(totalValeur), icon: TrendingUp, color: 'from-purple-400 to-purple-600', delay: 'delay-200' },
            ].map((kpi, i) => {
              const Icon = kpi.icon;
              return (
                <div key={i} className={`anim-slideUp ${kpi.delay} bg-white dark:bg-gray-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-gray-800 hover:shadow-md transition-shadow`}>
                  <div className="flex items-center justify-between mb-2">
                    <div className={`w-9 h-9 rounded-lg bg-gradient-to-br ${kpi.color} flex items-center justify-center`}>
                      <Icon className="w-4.5 h-4.5 text-white" />
                    </div>
                  </div>
                  <p className="text-lg font-display font-bold text-gray-900 dark:text-white truncate">{kpi.value}</p>
                  <p className="text-xs text-gray-400 dark:text-gray-500 mt-0.5">{kpi.label}</p>
                </div>
              );
            })}
          </div>

          {/* Productions par filière */}
          {Object.keys(productionsByFiliere).length > 0 && (
            <div className="anim-slideUp delay-250 bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 p-5">
              <h3 className="text-sm font-display font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
                <Wheat className="w-4 h-4 text-green-500" /> Productions par filière
              </h3>
              <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                {Object.entries(productionsByFiliere).map(([nom, data]: [string, any], i) => (
                  <div key={i} className="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800">
                    <div className="flex items-center gap-2 mb-2">
                      <div className="w-8 h-8 rounded-full flex items-center justify-center text-lg" style={{ backgroundColor: data.filiere.couleur || '#22c55e' }}>
                        {data.filiere.icone || '🌾'}
                      </div>
                      <h4 className="font-semibold text-gray-800 dark:text-gray-200">{nom}</h4>
                    </div>
                    <p className="text-2xl font-bold text-green-600 dark:text-green-400">{fmt(data.total)}</p>
                    <p className="text-xs text-gray-500 dark:text-gray-400">{data.count} production{data.count > 1 ? 's' : ''}</p>
                  </div>
                ))}
              </div>
            </div>
          )}

          {/* Entity info */}
          <div className="anim-slideUp delay-300 bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 p-5">
            <h3 className="text-sm font-display font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
              <MapPin className="w-4 h-4 text-green-500" /> Informations générales
            </h3>
            <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-3">
              {entity && Object.entries(entity).map(([k, v]) => {
                if (['id', 'created_at', 'updated_at'].includes(k) || v == null) return null;
                return (
                  <div key={k} className="flex flex-col">
                    <span className="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide">{k.replace(/_/g, ' ')}</span>
                    <span className="text-sm font-semibold text-gray-800 dark:text-gray-200">
                      {Array.isArray(v) ? v.join(', ') : String(v)}
                    </span>
                  </div>
                );
              })}
            </div>
          </div>

          {/* Children & Infrastructures */}
          <div className="grid md:grid-cols-2 gap-4 lg:gap-6">
            {childLabel && (
              <div className="anim-slideUp delay-350 bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 p-5">
                <h3 className="text-sm font-display font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
                  <Layers className="w-4 h-4 text-green-500" /> {childLabel} <span className="text-green-500">({children.length})</span>
                </h3>
                {children.length === 0 ? (
                  <p className="text-sm text-gray-400 dark:text-gray-500 italic">Aucune donnée</p>
                ) : (
                  <div className="space-y-2 max-h-56 overflow-y-auto scrollbar-thin pr-1">
                    {children.map((c: any, i: number) => (
                      <div key={c.id || i} className="flex items-center justify-between bg-gray-50 dark:bg-gray-800 rounded-lg px-3 py-2">
                        <span className="text-sm font-medium text-gray-700 dark:text-gray-300">{c.nom}</span>
                        {c.population && <span className="text-xs text-gray-400 dark:text-gray-500">{fmt(c.population)} hab.</span>}
                      </div>
                    ))}
                  </div>
                )}
              </div>
            )}

            <div className="anim-slideUp delay-400 bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 p-5">
              <h3 className="text-sm font-display font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
                <Package className="w-4 h-4 text-green-500" /> Infrastructures <span className="text-green-500">({infrastructures.length})</span>
              </h3>
              {infrastructures.length === 0 ? (
                <p className="text-sm text-gray-400 dark:text-gray-500 italic">Aucune infrastructure</p>
              ) : (
                <div className="space-y-2 max-h-56 overflow-y-auto scrollbar-thin pr-1">
                  {infrastructures.map((inf: any, i: number) => (
                    <div key={inf.id || i} className="flex items-start gap-3 bg-gray-50 dark:bg-gray-800 rounded-lg px-3 py-2">
                      <span className="text-lg">{infraIconMap[inf.type_infrastructure] || '🏗️'}</span>
                      <div className="min-w-0">
                        <p className="text-sm font-semibold text-gray-700 dark:text-gray-300 truncate">{inf.nom}</p>
                        {inf.type_infrastructure && (
                          <p className="text-xs text-gray-400 dark:text-gray-500 capitalize">
                            {inf.type_infrastructure.replace(/_/g, ' ')}
                          </p>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>
          </div>

          {/* Productions table */}
          {productions.length > 0 && (
            <div className="anim-slideUp delay-450 bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 p-5">
              <h3 className="text-sm font-display font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
                <BarChart2 className="w-4 h-4 text-green-500" /> Productions détaillées <span className="text-green-500">({productions.length})</span>
              </h3>
              <div className="overflow-x-auto rounded-lg border border-gray-100 dark:border-gray-800">
                <table className="w-full text-sm">
                  <thead>
                    <tr className="bg-gray-50 dark:bg-gray-800 text-left">
                      <th className="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase">Année</th>
                      <th className="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase">Quantité</th>
                      <th className="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase">Valeur</th>
                      <th className="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase">Producteurs</th>
                      <th className="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase">Superficie</th>
                    </tr>
                  </thead>
                  <tbody>
                    {productions.slice(0, 20).map((p: any, i: number) => (
                      <tr key={p.id || i} className="border-t border-gray-100 dark:border-gray-800 hover:bg-green-50/40 dark:hover:bg-green-900/20 transition-colors">
                        <td className="px-3 py-2 font-semibold text-gray-700 dark:text-gray-300">{p.annee}</td>
                        <td className="px-3 py-2 text-gray-600 dark:text-gray-400">{fmt(p.quantite)}</td>
                        <td className="px-3 py-2 text-gray-600 dark:text-gray-400">{fmtFCFA(p.valeur_fcfa)}</td>
                        <td className="px-3 py-2 text-gray-600 dark:text-gray-400">{fmt(p.nombre_producteurs)}</td>
                        <td className="px-3 py-2 text-gray-500 dark:text-gray-500">{p.superficie_ha ? `${fmt(p.superficie_ha)} ha` : '—'}</td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>
          )}

          {/* Producteurs summary */}
          {totalProducteurs > 0 && (
            <div className="anim-slideUp delay-500 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl border border-green-200 dark:border-green-800 p-5 flex items-center gap-5">
              <div className="w-14 h-14 rounded-full bg-green-100 dark:bg-green-800/40 flex items-center justify-center flex-shrink-0">
                <Users className="w-7 h-7 text-green-600 dark:text-green-300" />
              </div>
              <div>
                <p className="text-2xl font-display font-extrabold text-gray-900 dark:text-white">{fmt(totalProducteurs)}</p>
                <p className="text-sm text-gray-500 dark:text-gray-400">Producteurs répertoriés</p>
              </div>
            </div>
          )}
        </main>
      )}
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\app\map\page.tsx
================================================================================

'use client';

import { useState, useEffect, useCallback, useRef, useMemo } from 'react';
import dynamic from 'next/dynamic';
import Link from 'next/link';
import { ArrowLeft, Leaf, BarChart3 } from 'lucide-react';
import ThemeToggle from '@/components/ThemeToggle';
import type { GeoJSONFeatureCollection, MapLevel } from '@/types/api';
import {
  getRegionsGeoJSON, getDepartementsGeoJSON, getCommunesGeoJSON,
  getRegion, getDepartement, getCommuneResume,
  getRegionProductions, getDepartementProductions,
  getProductions,
} from '@/lib/api';

// ✨ Chargement dynamique sans SSR
const MapView = dynamic(() => import('@/components/MapView'), {
  ssr: false,
  loading: () => (
    <div className="w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-900 dark:to-gray-950 flex items-center justify-center rounded-xl">
      <div className="text-center">
        <div className="inline-block w-16 h-16 border-4 border-green-500 border-t-transparent rounded-full animate-spin mb-4" />
        <p className="text-gray-600 dark:text-gray-400 text-base font-semibold animate-pulse">
          Chargement de la carte…
        </p>
      </div>
    </div>
  ),
});

const Sidebar = dynamic(() => import('@/components/Sidebar'), {
  ssr: false,
  loading: () => (
    <div className="w-full h-full bg-white dark:bg-gray-950 border-r border-gray-200 dark:border-gray-800 flex items-center justify-center">
      <div className="inline-block w-8 h-8 border-3 border-green-500 border-t-transparent rounded-full animate-spin" />
    </div>
  ),
});

export default function MapPage() {
  const [mapLevel, setMapLevel] = useState<MapLevel>('regions');
  const [geoData, setGeoData] = useState<GeoJSONFeatureCollection | null>(null);
  const [loading, setLoading] = useState(true);
  const [selectedEntity, setSelectedEntity] = useState<any>(null);
  const [selectedFeatureId, setSelectedFeatureId] = useState<number | null>(null);

  const [filters, setFilters] = useState({
    filiere_id: null as number | null,
    categorie_id: null as number | null,
    produit_id: null as number | null,
    annee: null as number | null,
  });

  // Cache pour GeoJSON de base (sans enrichissement)
  const baseGeoDataCache = useRef<Map<MapLevel, GeoJSONFeatureCollection>>(new Map());
  
  // Debounce timer
  const debounceTimer = useRef<NodeJS.Timeout>();

  // ── Load GeoJSON optimisé avec cache local ──────────────────────────────────
  const loadGeoData = useCallback(async () => {
    const startTime = performance.now();
    console.log(
      `%c🗺️  [MapPage] Loading GeoJSON for level: ${mapLevel}`,
      'color: #3b82f6; font-weight: bold',
      filters
    );
    
    setLoading(true);
    
    try {
      let baseData: GeoJSONFeatureCollection;
      
      // Vérifier le cache local d'abord
      const cached = baseGeoDataCache.current.get(mapLevel);
      if (cached && !filters.produit_id && !filters.filiere_id && !filters.annee) {
        console.log('%c⚡ Using cached base GeoJSON', 'color: #10b981; font-weight: bold');
        baseData = cached;
      } else {
        // Charger depuis l'API (avec cache HTTP)
        switch (mapLevel) {
          case 'regions':
            baseData = await getRegionsGeoJSON();
            break;
          case 'departements':
            baseData = await getDepartementsGeoJSON(filters.filiere_id || undefined);
            break;
          case 'communes':
            baseData = await getCommunesGeoJSON();
            break;
          default:
            baseData = await getRegionsGeoJSON();
        }
        
        // Mettre en cache si pas de filtres
        if (!filters.produit_id && !filters.filiere_id && !filters.annee) {
          baseGeoDataCache.current.set(mapLevel, baseData);
        }
      }

      // Enrichir avec les productions seulement si nécessaire
      if (filters.produit_id || filters.filiere_id || filters.annee) {
        console.log('%c📊 Enriching with production data...', 'color: #8b5cf6; font-weight: bold');
        
        const productionsData = await getProductions({
          filiere_id: filters.filiere_id,
          categorie_id: filters.categorie_id,
          produit_id: filters.produit_id,
          annee: filters.annee,
          limit: 500,
        });

        const productions = productionsData.items || [];

        // Grouper par zone de manière optimisée
        const productionsByZone = new Map<number, {total: number; count: number}>();
        
        for (const prod of productions) {
          let zoneId: number | null = null;
          
          if (mapLevel === 'regions') zoneId = prod.region_id;
          else if (mapLevel === 'departements') zoneId = prod.departement_id;
          else if (mapLevel === 'communes') zoneId = prod.commune_id;

          if (!zoneId) continue;

          const existing = productionsByZone.get(zoneId) || { total: 0, count: 0 };
          existing.total += prod.quantite || 0;
          existing.count += 1;
          productionsByZone.set(zoneId, existing);
        }

        // Enrichir features de manière optimisée
        baseData = {
          ...baseData,
          features: baseData.features.map(feature => {
            const prodData = productionsByZone.get(feature.properties.id);
            return {
              ...feature,
              properties: {
                ...feature.properties,
                production_total: prodData?.total || 0,
                production_count: prodData?.count || 0,
              },
            };
          }),
        };

        console.log(`%c✅ Enriched ${baseData.features.length} features`, 'color: #22c55e; font-weight: bold');
      }

      setGeoData(baseData);
      
      const elapsed = (performance.now() - startTime).toFixed(1);
      console.log(`%c✅ GeoJSON ready in ${elapsed}ms`, 'color: #22c55e; font-weight: bold');
    } catch (e) {
      console.error('%c❌ GeoJSON load failed:', 'color: #ef4444; font-weight: bold', e);
    } finally {
      setLoading(false);
    }
  }, [mapLevel, filters]);

  // Debounced load
  useEffect(() => {
    // Clear existing timer
    if (debounceTimer.current) {
      clearTimeout(debounceTimer.current);
    }

    // Si changement de niveau, charger immédiatement
    if (!filters.produit_id && !filters.filiere_id && !filters.annee) {
      loadGeoData();
    } else {
      // Sinon, debounce de 300ms pour les filtres
      debounceTimer.current = setTimeout(() => {
        loadGeoData();
      }, 300);
    }

    return () => {
      if (debounceTimer.current) {
        clearTimeout(debounceTimer.current);
      }
    };
  }, [mapLevel, filters, loadGeoData]);

  // ── Feature click ─────────────────────────────────────────────────────────
  const handleFeatureClick = useCallback(async (properties: any) => {
    console.log(`%c🖱️  Feature clicked:`, 'color: #8b5cf6; font-weight: bold', properties);
    setSelectedFeatureId(properties.id);
    
    try {
      let entityData: any;
      
      switch (mapLevel) {
        case 'regions': {
          entityData = await getRegion(properties.id);
          if (filters.produit_id || filters.annee) {
            const prods = await getRegionProductions(
              properties.id,
              filters.annee || undefined,
              filters.produit_id || undefined
            );
            entityData = { ...entityData, productions: prods };
          }
          break;
        }
        case 'departements': {
          entityData = await getDepartement(properties.id);
          if (filters.produit_id || filters.annee) {
            const prods = await getDepartementProductions(
              properties.id,
              filters.annee || undefined,
              filters.produit_id || undefined
            );
            entityData = { ...entityData, productions: prods };
          }
          break;
        }
        case 'communes':
          entityData = await getCommuneResume(properties.id);
          break;
        default:
          entityData = properties;
      }
      
      setSelectedEntity(entityData);
      console.log('%c✅ Entity loaded', 'color: #22c55e; font-weight: bold');
    } catch (e) {
      console.error('%c❌ Detail fetch failed:', 'color: #ef4444; font-weight: bold', e);
      setSelectedEntity(properties);
    }
  }, [mapLevel, filters]);

  const handleFilterChange = useCallback((nf: any) => {
    console.log('%c🔄 Filters changing:', 'color: #f59e0b; font-weight: bold', nf);
    setFilters(nf);
  }, []);

  const handleMapLevelChange = useCallback((level: MapLevel) => {
    console.log(`%c🗺️  Map level changing to: ${level}`, 'color: #3b82f6; font-weight: bold');
    setMapLevel(level);
    setSelectedEntity(null);
    setSelectedFeatureId(null);
  }, []);

  // Mémoriser le nombre de zones
  const zoneCount = useMemo(() => geoData?.features.length || 0, [geoData]);

  return (
    <div className="h-screen flex flex-col bg-white dark:bg-gray-950">
      {/* Header */}
      <header className="flex-shrink-0 bg-white/95 dark:bg-gray-950/95 backdrop-blur-md border-b border-gray-200 dark:border-gray-800 z-10">
        <div className="px-4 md:px-6 py-3 flex items-center justify-between">
          <div className="flex items-center gap-3">
            <Link href="/" className="p-1.5 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all">
              <ArrowLeft className="w-5 h-5 text-gray-600 dark:text-gray-300" />
            </Link>
            <div className="flex items-center gap-2.5">
              <div className="w-9 h-9 bg-gradient-to-br from-green-400 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg">
                <Leaf className="w-5 h-5 text-white" />
              </div>
              <div>
                <h1 className="text-base font-display font-bold text-gray-900 dark:text-white leading-tight">
                  AgriVision
                </h1>
                <p className="text-xs text-gray-500 dark:text-gray-400 capitalize flex items-center gap-1">
                  <span className="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse" />
                  {mapLevel}
                </p>
              </div>
            </div>
          </div>

          <div className="flex items-center gap-2">
            <Link
              href="/stats"
              className="hidden sm:flex items-center gap-1.5 px-3 py-1.5 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-lg text-sm font-medium transition-all shadow-md hover:shadow-lg"
            >
              <BarChart3 className="w-4 h-4" /> Stats
            </Link>
            <div className="px-3 py-1 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg border border-green-200 dark:border-green-800">
              <span className="text-xs font-semibold">
                {loading ? '…' : `${zoneCount} zones`}
              </span>
            </div>
            <ThemeToggle />
          </div>
        </div>
      </header>

      {/* Body */}
      <div className="flex-1 flex overflow-hidden">
        {/* Sidebar */}
        <div className="w-80 lg:w-96 flex-shrink-0 overflow-hidden border-r border-gray-200 dark:border-gray-800">
          <Sidebar
            onFilterChange={handleFilterChange}
            onMapLevelChange={handleMapLevelChange}
            selectedEntity={selectedEntity}
            currentMapLevel={mapLevel}
          />
        </div>

        {/* Map */}
        <div className="flex-1 p-3 md:p-5 overflow-hidden bg-gradient-to-br from-gray-50 to-white dark:from-gray-950 dark:to-gray-900">
          <MapView
            geoData={geoData}
            loading={loading}
            mapLevel={mapLevel}
            onFeatureClick={handleFeatureClick}
            selectedFeatureId={selectedFeatureId}
          />
        </div>
      </div>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\app\stats\page.tsx
================================================================================

'use client';

import { useState, useEffect } from 'react';
import Link from 'next/link';
import {
  ArrowLeft, Leaf, TrendingUp, TrendingDown, BarChart3,
  Calendar, MapPin, Package, Users, Award, Activity,
} from 'lucide-react';
import ThemeToggle from '@/components/ThemeToggle';
import {
  getStatistiquesGlobales,
  getStatistiquesProduction,
  getEvolutionProduction,
  getTopRegions,
  getTopProduits,
  comparerAnnees,
  getAnneesDisponibles,
  getFilieres,
  getProduits,
} from '@/lib/api';
import { SkeletonStat } from '@/components/Skeleton';

export default function StatsPage() {
  const [statsGlobales, setStatsGlobales] = useState<any>(null);
  const [statsProduction, setStatsProduction] = useState<any>(null);
  const [evolution, setEvolution] = useState<any[]>([]);
  const [topRegions, setTopRegions] = useState<any[]>([]);
  const [topProduits, setTopProduits] = useState<any[]>([]);
  const [comparaison, setComparaison] = useState<any>(null);
  const [annees, setAnnees] = useState<number[]>([]);
  const [filieres, setFilieres] = useState<any[]>([]);
  const [produits, setProduits] = useState<any[]>([]);

  const [selectedAnnee, setSelectedAnnee] = useState<number | null>(null);
  const [selectedFiliere, setSelectedFiliere] = useState<number | null>(null);
  const [selectedProduit, setSelectedProduit] = useState<number | null>(null);
  const [anneeRef, setAnneeRef] = useState<number | null>(null);
  const [anneeCmp, setAnneeCmp] = useState<number | null>(null);

  const [loading, setLoading] = useState(true);
  const [activeTab, setActiveTab] = useState<'overview' | 'evolution' | 'top' | 'comparison'>('overview');

  useEffect(() => {
    loadInitialData();
  }, []);

  useEffect(() => {
    if (selectedAnnee || selectedFiliere || selectedProduit) {
      loadFilteredData();
    }
  }, [selectedAnnee, selectedFiliere, selectedProduit]);

  useEffect(() => {
    if (anneeRef && anneeCmp && anneeRef !== anneeCmp) {
      loadComparaison();
    }
  }, [anneeRef, anneeCmp]);

  const loadInitialData = async () => {
    console.log('📊 [StatsPage] Loading initial data...');
    setLoading(true);

    try {
      const [globales, production, anneesData, filieresData, produitsData] = await Promise.all([
        getStatistiquesGlobales(),
        getStatistiquesProduction(),
        getAnneesDisponibles(),
        getFilieres(0, 100),
        getProduits(0, 100),
      ]);

      setStatsGlobales(globales);
      setStatsProduction(production);
      setAnnees(anneesData.sort((a: number, b: number) => b - a));
      setFilieres(filieresData.items);
      setProduits(produitsData.items);

      // Charger top regions et produits
      const [regions, products] = await Promise.all([
        getTopRegions(undefined, undefined, 10),
        getTopProduits(undefined, undefined, 10),
      ]);

      setTopRegions(regions);
      setTopProduits(products);

      console.log('✅ [StatsPage] Initial data loaded');
    } catch (error) {
      console.error('❌ [StatsPage] Error loading data:', error);
    } finally {
      setLoading(false);
    }
  };

  const loadFilteredData = async () => {
    console.log('🔄 [StatsPage] Loading filtered data...');
    
    try {
      const [evo, regions, products] = await Promise.all([
        getEvolutionProduction(selectedProduit || undefined, undefined, undefined, undefined),
        getTopRegions(selectedAnnee || undefined, selectedProduit || undefined, 10),
        getTopProduits(selectedAnnee || undefined, undefined, 10),
      ]);

      setEvolution(evo);
      setTopRegions(regions);
      setTopProduits(products);

      console.log('✅ [StatsPage] Filtered data loaded');
    } catch (error) {
      console.error('❌ [StatsPage] Error loading filtered data:', error);
    }
  };

  const loadComparaison = async () => {
    if (!anneeRef || !anneeCmp) return;

    console.log(`🔄 [StatsPage] Comparing years ${anneeRef} vs ${anneeCmp}`);

    try {
      const comp = await comparerAnnees(anneeRef, anneeCmp, selectedProduit || undefined);
      setComparaison(comp);
      console.log('✅ [StatsPage] Comparison loaded');
    } catch (error) {
      console.error('❌ [StatsPage] Error loading comparison:', error);
    }
  };

  const fmt = (n: number | null | undefined) =>
    n != null ? new Intl.NumberFormat('fr-FR').format(n) : '—';

  const fmtFCFA = (n: number | null | undefined) =>
    n != null ? `${new Intl.NumberFormat('fr-FR').format(n)} FCFA` : '—';

  const tabs = [
    { id: 'overview', label: 'Vue d\'ensemble', icon: Activity },
    { id: 'evolution', label: 'Évolution', icon: TrendingUp },
    { id: 'top', label: 'Classements', icon: Award },
    { id: 'comparison', label: 'Comparaison', icon: BarChart3 },
  ] as const;

  return (
    <div className="min-h-screen bg-gradient-to-br from-white via-green-50 to-emerald-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950">
      {/* Header */}
      <header className="sticky top-0 z-30 bg-white/90 dark:bg-gray-950/90 backdrop-blur-md border-b border-gray-200 dark:border-gray-800">
        <div className="max-w-7xl mx-auto px-4 md:px-6 py-3 flex items-center justify-between">
          <div className="flex items-center gap-3">
            <Link href="/" className="p-1.5 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all">
              <ArrowLeft className="w-5 h-5 text-gray-600 dark:text-gray-300" />
            </Link>
            <div className="flex items-center gap-2">
              <div className="w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-600 rounded-lg flex items-center justify-center">
                <BarChart3 className="w-4 h-4 text-white" />
              </div>
              <div>
                <h1 className="text-sm font-bold text-gray-900 dark:text-white">Statistiques</h1>
                <p className="text-xs text-gray-500 dark:text-gray-400">Analyse des productions</p>
              </div>
            </div>
          </div>
          <ThemeToggle />
        </div>
      </header>

      {/* Filters */}
      <div className="max-w-7xl mx-auto px-4 md:px-6 py-4 border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900">
        <div className="grid sm:grid-cols-3 gap-3">
          <div>
            <label className="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1">
              <Calendar className="w-3 h-3 inline mr-1" /> Année
            </label>
            <select
              value={selectedAnnee || ''}
              onChange={e => setSelectedAnnee(e.target.value ? Number(e.target.value) : null)}
              className="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"
            >
              <option value="">Toutes les années</option>
              {annees.map(a => <option key={a} value={a}>{a}</option>)}
            </select>
          </div>

          <div>
            <label className="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1">
              <Leaf className="w-3 h-3 inline mr-1" /> Filière
            </label>
            <select
              value={selectedFiliere || ''}
              onChange={e => setSelectedFiliere(e.target.value ? Number(e.target.value) : null)}
              className="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"
            >
              <option value="">Toutes les filières</option>
              {filieres.map(f => <option key={f.id} value={f.id}>{f.nom}</option>)}
            </select>
          </div>

          <div>
            <label className="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1">
              <Package className="w-3 h-3 inline mr-1" /> Produit
            </label>
            <select
              value={selectedProduit || ''}
              onChange={e => setSelectedProduit(e.target.value ? Number(e.target.value) : null)}
              className="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"
            >
              <option value="">Tous les produits</option>
              {produits.map(p => <option key={p.id} value={p.id}>{p.nom}</option>)}
            </select>
          </div>
        </div>
      </div>

      {/* Tabs */}
      <div className="max-w-7xl mx-auto px-4 md:px-6 py-4">
        <div className="flex gap-2 overflow-x-auto scrollbar-thin pb-2">
          {tabs.map(tab => {
            const Icon = tab.icon;
            const isActive = activeTab === tab.id;
            return (
              <button
                key={tab.id}
                onClick={() => setActiveTab(tab.id)}
                className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all ${
                  isActive
                    ? 'bg-green-500 text-white shadow-lg'
                    : 'bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-400 hover:bg-green-50 dark:hover:bg-green-900/20'
                }`}
              >
                <Icon className="w-4 h-4" />
                {tab.label}
              </button>
            );
          })}
        </div>
      </div>

      {/* Content */}
      <div className="max-w-7xl mx-auto px-4 md:px-6 py-6">
        {loading ? (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {[1, 2, 3, 4].map(i => <SkeletonStat key={i} />)}
          </div>
        ) : (
          <>
            {/* Overview Tab */}
            {activeTab === 'overview' && (
              <div className="space-y-6 anim-fadeIn">
                {/* Global Stats */}
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                  {[
                    { label: 'Régions', value: statsGlobales?.total_regions, icon: MapPin, color: 'blue' },
                    { label: 'Filières', value: statsGlobales?.total_filieres, icon: Leaf, color: 'green' },
                    { label: 'Produits', value: statsGlobales?.total_produits, icon: Package, color: 'purple' },
                    { label: 'Productions', value: statsGlobales?.total_productions, icon: TrendingUp, color: 'orange' },
                  ].map((stat, i) => {
                    const Icon = stat.icon;
                    return (
                      <div key={i} className="bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-800 shadow-sm hover:shadow-md transition-shadow">
                        <div className="flex items-center justify-between mb-3">
                          <div className={`p-3 rounded-xl bg-${stat.color}-500`}>
                            <Icon className="w-6 h-6 text-white" />
                          </div>
                        </div>
                        <div className="text-3xl font-bold text-gray-900 dark:text-white mb-1">
                          {fmt(stat.value)}
                        </div>
                        <div className="text-sm text-gray-600 dark:text-gray-400">{stat.label}</div>
                      </div>
                    );
                  })}
                </div>

                {/* Production Stats */}
                {statsProduction && (
                  <div className="bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-800 shadow-sm">
                    <h2 className="text-lg font-bold text-gray-900 dark:text-white mb-4">Statistiques de production</h2>
                    <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                      {Object.entries(statsProduction).map(([key, value]: [string, any]) => (
                        <div key={key} className="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
                          <div className="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1">
                            {key.replace(/_/g, ' ')}
                          </div>
                          <div className="text-xl font-bold text-gray-900 dark:text-white">
                            {typeof value === 'number' ? fmt(value) : String(value)}
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
              </div>
            )}

            {/* Evolution Tab */}
            {activeTab === 'evolution' && (
              <div className="anim-fadeIn">
                <div className="bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-800 shadow-sm">
                  <h2 className="text-lg font-bold text-gray-900 dark:text-white mb-4">Évolution de la production</h2>
                  {evolution.length === 0 ? (
                    <p className="text-gray-500 dark:text-gray-400 text-center py-8">
                      Sélectionnez un produit pour voir son évolution
                    </p>
                  ) : (
                    <div className="space-y-3">
                      {evolution.map((item: any, i: number) => (
                        <div key={i} className="flex items-center justify-between bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
                          <div className="flex items-center gap-3">
                            <Calendar className="w-5 h-5 text-green-500" />
                            <div>
                              <div className="font-semibold text-gray-900 dark:text-white">{item.annee || item.periode}</div>
                              <div className="text-xs text-gray-500 dark:text-gray-400">
                                {item.nombre_productions || 0} production{(item.nombre_productions || 0) > 1 ? 's' : ''}
                              </div>
                            </div>
                          </div>
                          <div className="text-right">
                            <div className="text-lg font-bold text-green-600 dark:text-green-400">
                              {fmt(item.total_quantite || item.quantite)}
                            </div>
                            {item.total_valeur_fcfa && (
                              <div className="text-xs text-gray-500 dark:text-gray-400">
                                {fmtFCFA(item.total_valeur_fcfa)}
                              </div>
                            )}
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                </div>
              </div>
            )}

            {/* Top Tab */}
            {activeTab === 'top' && (
              <div className="grid md:grid-cols-2 gap-6 anim-fadeIn">
                {/* Top Regions */}
                <div className="bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-800 shadow-sm">
                  <h2 className="text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2">
                    <Award className="w-5 h-5 text-yellow-500" /> Top Régions
                  </h2>
                  <div className="space-y-3">
                    {topRegions.map((region: any, i: number) => (
                      <div key={i} className="flex items-center gap-3 bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
                        <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${
                          i === 0 ? 'bg-yellow-500' : i === 1 ? 'bg-gray-400' : i === 2 ? 'bg-orange-600' : 'bg-gray-300 dark:bg-gray-700'
                        }`}>
                          {i + 1}
                        </div>
                        <div className="flex-1 min-w-0">
                          <div className="font-semibold text-gray-900 dark:text-white truncate">
                            {region.nom || `Région ${region.region_id}`}
                          </div>
                          <div className="text-xs text-gray-500 dark:text-gray-400">
                            {fmt(region.total_quantite)} • {fmtFCFA(region.total_valeur_fcfa)}
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Top Produits */}
                <div className="bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-800 shadow-sm">
                  <h2 className="text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2">
                    <Award className="w-5 h-5 text-green-500" /> Top Produits
                  </h2>
                  <div className="space-y-3">
                    {topProduits.map((produit: any, i: number) => (
                      <div key={i} className="flex items-center gap-3 bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
                        <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${
                          i === 0 ? 'bg-green-500' : i === 1 ? 'bg-emerald-400' : i === 2 ? 'bg-teal-600' : 'bg-gray-300 dark:bg-gray-700'
                        }`}>
                          {i + 1}
                        </div>
                        <div className="flex-1 min-w-0">
                          <div className="font-semibold text-gray-900 dark:text-white truncate">
                            {produit.nom || `Produit ${produit.produit_id}`}
                          </div>
                          <div className="text-xs text-gray-500 dark:text-gray-400">
                            {fmt(produit.total_quantite)} • {fmtFCFA(produit.total_valeur_fcfa)}
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            )}

            {/* Comparison Tab */}
            {activeTab === 'comparison' && (
              <div className="anim-fadeIn space-y-6">
                <div className="bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-800 shadow-sm">
                  <h2 className="text-lg font-bold text-gray-900 dark:text-white mb-4">Comparaison entre années</h2>
                  
                  <div className="grid sm:grid-cols-2 gap-4 mb-6">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Année de référence
                      </label>
                      <select
                        value={anneeRef || ''}
                        onChange={e => setAnneeRef(e.target.value ? Number(e.target.value) : null)}
                        className="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"
                      >
                        <option value="">Sélectionner...</option>
                        {annees.map(a => <option key={a} value={a}>{a}</option>)}
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Année de comparaison
                      </label>
                      <select
                        value={anneeCmp || ''}
                        onChange={e => setAnneeCmp(e.target.value ? Number(e.target.value) : null)}
                        className="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900"
                      >
                        <option value="">Sélectionner...</option>
                        {annees.map(a => <option key={a} value={a}>{a}</option>)}
                      </select>
                    </div>
                  </div>

                  {comparaison ? (
                    <div className="space-y-4">
                      {Object.entries(comparaison).map(([key, value]: [string, any]) => {
                        if (key === 'annee_reference' || key === 'annee_comparaison') return null;
                        return (
                          <div key={key} className="bg-gray-50 dark:bg-gray-800 rounded-lg p-4">
                            <div className="text-sm text-gray-600 dark:text-gray-400 mb-2">
                              {key.replace(/_/g, ' ').toUpperCase()}
                            </div>
                            <div className="text-2xl font-bold text-gray-900 dark:text-white">
                              {typeof value === 'number' ? fmt(value) : String(value)}
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  ) : (
                    <p className="text-gray-500 dark:text-gray-400 text-center py-8">
                      Sélectionnez deux années différentes pour comparer
                    </p>
                  )}
                </div>
              </div>
            )}
          </>
        )}
      </div>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\app\layout.tsx
================================================================================

import type { Metadata } from 'next';
import './globals.css';

export const metadata: Metadata = {
  title: 'AgriVision - Cartographie Agricole',
  description: 'Plateforme de cartographie des données agricoles, pastorales et halieutiques du Cameroun',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="fr" suppressHydrationWarning>
      <head>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin="anonymous" />
        <link
          href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Open+Sans:wght@300;400;500;600;700&display=swap"
          rel="stylesheet"
        />
        <link
          rel="stylesheet"
          href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossOrigin=""
        />
      </head>
      <body className="font-body antialiased bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 transition-colors duration-300">
        {children}
      </body>
    </html>
  );
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\app\page.tsx
================================================================================

'use client';

import { useState, useEffect } from 'react';
import Link from 'next/link';
import {
  MapPin,
  TrendingUp,
  Leaf,
  Waves,
  Database,
  ArrowRight,
  BarChart3,
  Globe,
  Sparkles,
} from 'lucide-react';
import ThemeToggle from '@/components/ThemeToggle';
import { getStatistiquesGlobales } from '@/lib/api';
import { SkeletonStat } from '@/components/Skeleton';

export default function HomePage() {
  const [stats, setStats] = useState<any>(null);
  const [loading, setLoading] = useState(true);
  const [hoveredCard, setHoveredCard] = useState<number | null>(null);

  useEffect(() => {
    loadStats();
  }, []);

  const loadStats = async () => {
    try {
      const data = await getStatistiquesGlobales();
      setStats(data);
    } catch (error) {
      console.error('Erreur lors du chargement des statistiques:', error);
    } finally {
      setLoading(false);
    }
  };

  const features = [
    {
      icon: MapPin,
      title: 'Cartographie Interactive',
      description: 'Explorez les divisions administratives du Cameroun avec une carte interactive et intuitive',
      color: 'from-green-400 to-emerald-600',
    },
    {
      icon: Leaf,
      title: 'Données Agricoles',
      description: 'Accédez aux données de production agricole par région, département et commune',
      color: 'from-lime-400 to-green-600',
    },
    {
      icon: TrendingUp,
      title: 'Statistiques en Temps Réel',
      description: 'Visualisez les tendances et évolutions de la production sur plusieurs années',
      color: 'from-emerald-400 to-teal-600',
    },
    {
      icon: Waves,
      title: 'Zones Halieutiques',
      description: 'Découvrez les zones de pêche maritimes, fluviales et lacustres',
      color: 'from-cyan-400 to-blue-600',
    },
  ];

  return (
    <div className="min-h-screen bg-gradient-to-br from-white via-green-50 to-emerald-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950">
      {/* Header */}
      <header className="fixed top-0 left-0 right-0 z-50 backdrop-blur-xl bg-white/80 dark:bg-gray-950/80 border-b border-gray-200 dark:border-gray-800">
        <nav className="max-w-7xl mx-auto px-6 py-4" style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
          <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', animation: 'slideRight 0.5s ease-out' }}>
            <div className="w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-600 rounded-xl" style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
              <Leaf className="w-6 h-6 text-white" />
            </div>
            <div>
              <h1 className="text-xl font-display font-bold text-gray-900 dark:text-white">
                AgriVision
              </h1>
              <p className="text-xs text-gray-600 dark:text-gray-400">
                Cartographie Agricole
              </p>
            </div>
          </div>
          
          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>
            <ThemeToggle />
            <Link
              href="/map"
              className="px-6 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-medium rounded-lg transition-all transform hover:scale-105 shadow-lg hover:shadow-xl"
              style={{ display: 'inline-flex', alignItems: 'center', gap: '0.5rem', animation: 'slideLeft 0.5s ease-out' }}
            >
              Accéder à la carte
              <ArrowRight className="w-5 h-5" />
            </Link>
          </div>
        </nav>
      </header>

      {/* Hero Section */}
      <section className="pt-32 pb-20 px-6">
        <div className="max-w-7xl mx-auto">
          <div className="text-center mb-16" style={{ animation: 'slideUp 0.7s ease-out' }}>
            <div className="inline-flex items-center gap-2 px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full mb-6" style={{ animation: 'fadeIn 0.5s ease-in-out' }}>
              <Sparkles className="w-4 h-4" />
              <span className="text-sm font-medium">Plateforme de cartographie interactive</span>
            </div>
            
            <h2 className="text-5xl md:text-6xl font-display font-extrabold text-gray-900 dark:text-white mb-6 leading-tight">
              Explorez les Données
              <br />
              <span className="bg-gradient-to-r from-green-500 to-emerald-600 bg-clip-text text-transparent">
                Agricoles du Cameroun
              </span>
            </h2>
            
            <p className="text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto mb-8">
              Une plateforme moderne pour visualiser et analyser les données de production agricole, 
              pastorale et halieutique à travers les 10 régions du Cameroun.
            </p>

            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '1rem', flexWrap: 'wrap' }}>
              <Link
                href="/map"
                className="px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold rounded-xl transition-all transform hover:scale-105 shadow-2xl hover:shadow-3xl text-lg"
                style={{ display: 'inline-flex', alignItems: 'center', gap: '0.75rem' }}
              >
                <Globe className="w-6 h-6" />
                Découvrir la carte
                <ArrowRight className="w-6 h-6" />
              </Link>
              
              <Link
                href="/stats"
                className="px-8 py-4 bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-900 dark:text-white font-bold rounded-xl border-2 border-gray-200 dark:border-gray-700 transition-all transform hover:scale-105 shadow-lg text-lg"
                style={{ display: 'inline-flex', alignItems: 'center', gap: '0.75rem' }}
              >
                <BarChart3 className="w-6 h-6" />
                Voir les statistiques
              </Link>
            </div>
          </div>

          {/* Stats Cards */}
          {loading ? (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-20" style={{ animation: 'fadeIn 0.5s ease-in-out' }}>
              {[1, 2, 3, 4].map((i) => (
                <SkeletonStat key={i} />
              ))}
            </div>
          ) : stats && (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-20" style={{ animation: 'slideUp 0.8s ease-out' }}>
              {[
                { label: 'Régions', value: stats.total_regions, icon: MapPin, color: 'bg-blue-500' },
                { label: 'Départements', value: stats.total_departements, icon: Database, color: 'bg-purple-500' },
                { label: 'Filières', value: stats.total_filieres, icon: Leaf, color: 'bg-green-500' },
                { label: 'Produits', value: stats.total_produits, icon: TrendingUp, color: 'bg-orange-500' },
              ].map((stat, index) => {
                const Icon = stat.icon;
                return (
                  <div
                    key={index}
                    className="bg-white dark:bg-gray-900 rounded-2xl p-8 border-2 border-gray-200 dark:border-gray-800 hover:border-green-500 dark:hover:border-green-500 transition-all transform hover:scale-105 hover:shadow-2xl cursor-pointer"
                    style={{ animation: `slideUp 0.${8 + index}s ease-out` }}
                  >
                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '1rem' }}>
                      <div className={`p-3 ${stat.color} rounded-xl`}>
                        <Icon className="w-8 h-8 text-white" />
                      </div>
                      <div className="text-xs font-medium text-gray-500 dark:text-gray-400 px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-full">
                        Total
                      </div>
                    </div>
                    <div className="text-4xl font-display font-bold text-gray-900 dark:text-white mb-2">
                      {stat.value.toLocaleString()}
                    </div>
                    <div className="text-sm font-medium text-gray-600 dark:text-gray-400">
                      {stat.label}
                    </div>
                  </div>
                );
              })}
            </div>
          )}

          {/* Features Grid */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
            {features.map((feature, index) => {
              const Icon = feature.icon;
              return (
                <div
                  key={index}
                  onMouseEnter={() => setHoveredCard(index)}
                  onMouseLeave={() => setHoveredCard(null)}
                  className="group relative bg-white dark:bg-gray-900 rounded-2xl p-8 border-2 border-gray-200 dark:border-gray-800 hover:border-green-500 dark:hover:border-green-500 transition-all transform hover:scale-105 hover:shadow-2xl cursor-pointer overflow-hidden"
                  style={{ animation: `slideUp ${1 + index * 0.1}s ease-out` }}
                >
                  {/* Gradient Background on Hover */}
                  <div
                    className={`absolute inset-0 bg-gradient-to-br ${feature.color} opacity-0 group-hover:opacity-10 dark:group-hover:opacity-20 transition-opacity duration-300`}
                  />
                  
                  <div className="relative z-10">
                    <div className={`inline-flex p-4 bg-gradient-to-br ${feature.color} rounded-2xl mb-6 transform transition-transform duration-300 ${hoveredCard === index ? 'scale-110 rotate-3' : ''}`}>
                      <Icon className="w-8 h-8 text-white" />
                    </div>
                    
                    <h3 className="text-2xl font-display font-bold text-gray-900 dark:text-white mb-3">
                      {feature.title}
                    </h3>
                    
                    <p className="text-gray-600 dark:text-gray-400 leading-relaxed">
                      {feature.description}
                    </p>
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      </section>

      {/* CTA Section */}
      <section className="py-20 px-6 bg-gradient-to-r from-green-500 to-emerald-600">
        <div className="max-w-4xl mx-auto text-center" style={{ animation: 'slideUp 1.2s ease-out' }}>
          <h2 className="text-4xl md:text-5xl font-display font-extrabold text-white mb-6">
            Prêt à explorer les données ?
          </h2>
          <p className="text-xl text-green-50 mb-8">
            Accédez à la carte interactive et découvrez les bassins de production du Cameroun
          </p>
          <Link
            href="/map"
            className="inline-flex items-center gap-3 px-10 py-5 bg-white text-green-600 font-bold rounded-xl text-lg transition-all transform hover:scale-105 shadow-2xl hover:shadow-3xl"
          >
            <Globe className="w-7 h-7" />
            Commencer l'exploration
            <ArrowRight className="w-7 h-7" />
          </Link>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-12 px-6 bg-white dark:bg-gray-950 border-t border-gray-200 dark:border-gray-800">
        <div className="max-w-7xl mx-auto text-center">
          <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '0.75rem', marginBottom: '1rem' }}>
            <div className="w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-600 rounded-lg" style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
              <Leaf className="w-5 h-5 text-white" />
            </div>
            <span className="text-lg font-display font-bold text-gray-900 dark:text-white">
              AgriVision
            </span>
          </div>
          <p className="text-sm text-gray-600 dark:text-gray-400">
            © 2025 AgriVision. Plateforme de cartographie agricole du Cameroun.
          </p>
        </div>
      </footer>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\app\globals.css
================================================================================

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --color-primary: 34 197 94;
  }

  body {
    font-family: 'Open Sans', system-ui, sans-serif;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Montserrat', system-ui, sans-serif;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-gray-900;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-gray-700 rounded-full;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400 dark:bg-gray-600;
  }
}

/* ─── Shimmer ──────────────────────────────────────────────────────────────── */
@keyframes shimmer {
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
}

.animate-shimmer {
  animation: shimmer 2s infinite linear;
  background: linear-gradient(
    to right,
    rgba(229, 231, 235, 0.1) 0%,
    rgba(229, 231, 235, 0.3) 50%,
    rgba(229, 231, 235, 0.1) 100%
  );
  background-size: 2000px 100%;
}

.dark .animate-shimmer {
  background: linear-gradient(
    to right,
    rgba(31, 41, 55, 0.1) 0%,
    rgba(31, 41, 55, 0.3) 50%,
    rgba(31, 41, 55, 0.1) 100%
  );
  background-size: 2000px 100%;
}

/* ─── Page-level entrance animations ───────────────────────────────────────── */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(18px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInDown {
  from { opacity: 0; transform: translateY(-18px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes slideRight {
  from { opacity: 0; transform: translateX(-24px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes slideLeft {
  from { opacity: 0; transform: translateX(24px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes slideUp {
  from { opacity: 0; transform: translateY(24px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes slideDown {
  from { opacity: 0; transform: translateY(-24px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.88); }
  to   { opacity: 1; transform: scale(1); }
}
@keyframes pulseGreen {
  0%, 100% { box-shadow: 0 0 0 0 rgba(34,197,94,0.5); }
  50%      { box-shadow: 0 0 0 8px rgba(34,197,94,0); }
}
@keyframes spinSlow {
  to { transform: rotate(360deg); }
}
/* counter animation */
@keyframes countUp {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

.animate-fadeInUp   { animation: fadeInUp   0.55s cubic-bezier(.22,.61,0,1) both; }
.animate-fadeInDown { animation: fadeInDown 0.55s cubic-bezier(.22,.61,0,1) both; }
.animate-fadeIn     { animation: fadeIn     0.45s ease both; }
.animate-slideUp    { animation: slideUp    0.55s cubic-bezier(.22,.61,0,1) both; }
.animate-slideDown  { animation: slideDown  0.55s cubic-bezier(.22,.61,0,1) both; }
.animate-slideRight { animation: slideRight 0.5s  cubic-bezier(.22,.61,0,1) both; }
.animate-slideLeft  { animation: slideLeft  0.5s  cubic-bezier(.22,.61,0,1) both; }
.animate-scaleIn    { animation: scaleIn    0.4s  cubic-bezier(.22,.61,0,1) both; }
.animate-pulseGreen { animation: pulseGreen 2s    ease-in-out infinite; }
.animate-countUp    { animation: countUp    0.5s  cubic-bezier(.22,.61,0,1) both; }

/* staggered delay helpers */
.delay-50  { animation-delay: 50ms; }
.delay-100 { animation-delay: 100ms; }
.delay-150 { animation-delay: 150ms; }
.delay-200 { animation-delay: 200ms; }
.delay-250 { animation-delay: 250ms; }
.delay-300 { animation-delay: 300ms; }
.delay-350 { animation-delay: 350ms; }
.delay-400 { animation-delay: 400ms; }
.delay-500 { animation-delay: 500ms; }
.delay-600 { animation-delay: 600ms; }

/* ─── Leaflet dark-mode ────────────────────────────────────────────────────── */
.dark .leaflet-container {
  background: #1a1a1a;
}
.dark .leaflet-tile {
  filter: brightness(0.6) invert(1) contrast(3) hue-rotate(200deg) saturate(0.3) brightness(0.7);
}

/* ─── Card glass effect ────────────────────────────────────────────────────── */
.glass-card {
  background: rgba(255,255,255,0.72);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border: 1px solid rgba(255,255,255,0.5);
}
.dark .glass-card {
  background: rgba(20,24,34,0.72);
  border-color: rgba(255,255,255,0.08);
}

/* ─── Gradient text helper ─────────────────────────────────────────────────── */
.gradient-text-green {
  background: linear-gradient(135deg, #22c55e, #10b981, #14b8a6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* ─── Tooltip & map overrides ──────────────────────────────────────────────── */
.map-tooltip {
  background: rgba(255,255,255,0.95) !important;
  border: 2px solid #22c55e !important;
  border-radius: 8px !important;
  padding: 6px 10px !important;
  font-weight: 600 !important;
  font-size: 13px !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15) !important;
  backdrop-filter: blur(4px) !important;
  pointer-events: none !important;
}
.dark .map-tooltip {
  background: rgba(31,41,55,0.95) !important;
  border-color: #16a34a !important;
  color: white !important;
}
.leaflet-control-attribution {
  font-size: 10px !important;
  background: rgba(255,255,255,0.7) !important;
  padding: 2px 5px !important;
}
.dark .leaflet-control-attribution {
  background: rgba(0,0,0,0.5) !important;
  color: rgba(255,255,255,0.7) !important;
}

/* ─── Recharts responsive fix ──────────────────────────────────────────────── */
.recharts-wrapper { width: 100% !important; }


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\app\error.tsx
================================================================================

'use client';

import { useEffect } from 'react';
import { AlertCircle, RefreshCw } from 'lucide-react';

export default function Error({
  error,
  reset,
}: {
  error: Error & { digest?: string };
  reset: () => void;
}) {
  useEffect(() => {
    console.error('Application Error:', error);
  }, [error]);

  return (
    <div className="min-h-screen bg-white dark:bg-gray-950 flex items-center justify-center p-6">
      <div className="max-w-md w-full text-center">
        <div className="inline-flex items-center justify-center w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full mb-6">
          <AlertCircle className="w-10 h-10 text-red-600 dark:text-red-400" />
        </div>
        
        <h2 className="text-3xl font-display font-bold text-gray-900 dark:text-white mb-4">
          Une erreur est survenue
        </h2>
        
        <p className="text-gray-600 dark:text-gray-400 mb-8">
          {error.message || 'Désolé, quelque chose s\'est mal passé. Veuillez réessayer.'}
        </p>
        
        <button
          onClick={reset}
          className="inline-flex items-center gap-2 px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-all transform hover:scale-105"
        >
          <RefreshCw className="w-5 h-5" />
          Réessayer
        </button>
      </div>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\app\not-found.tsx
================================================================================

'use client';

import Link from 'next/link';
import { Home, MapPin } from 'lucide-react';

export default function NotFound() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-white via-green-50 to-emerald-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-950 flex items-center justify-center p-6">
      <div className="max-w-md w-full text-center">
        <div className="inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full mb-6">
          <MapPin className="w-12 h-12 text-white" />
        </div>
        
        <h1 className="text-9xl font-display font-extrabold text-gray-900 dark:text-white mb-4">
          404
        </h1>
        
        <h2 className="text-3xl font-display font-bold text-gray-900 dark:text-white mb-4">
          Page non trouvée
        </h2>
        
        <p className="text-gray-600 dark:text-gray-400 mb-8">
          Désolé, la page que vous recherchez n'existe pas ou a été déplacée.
        </p>
        
        <Link
          href="/"
          className="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-medium rounded-lg transition-all transform hover:scale-105 shadow-lg"
        >
          <Home className="w-5 h-5" />
          Retour à l'accueil
        </Link>
      </div>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\components\MapView.tsx
================================================================================

'use client';

import { useEffect, useRef, useState, memo } from 'react';
import L from 'leaflet';
import 'leaflet/dist/leaflet.css';
import type { GeoJSONFeatureCollection, MapLevel } from '@/types/api';

const MAPTILER_API_KEY = "Lr72DkH8TYyjpP7RNZS9";

interface MapViewProps {
  geoData: GeoJSONFeatureCollection | null;
  loading: boolean;
  mapLevel: MapLevel;
  onFeatureClick?: (properties: any) => void;
  selectedFeatureId?: number | null;
}

const MapSkeleton = () => (
  <div className="w-full h-full bg-gray-100 dark:bg-gray-900 flex items-center justify-center rounded-xl">
    <div className="text-center">
      <div className="inline-block w-14 h-14 border-4 border-green-500 border-t-transparent rounded-full animate-spin mb-3" />
      <p className="text-gray-500 dark:text-gray-400 text-sm font-medium">Chargement…</p>
    </div>
  </div>
);

export default memo(function MapView({
  geoData,
  loading,
  mapLevel,
  onFeatureClick,
  selectedFeatureId,
}: MapViewProps) {
  const mapRef = useRef<L.Map | null>(null);
  const geoJsonLayerRef = useRef<L.GeoJSON | null>(null);
  const mapContainerRef = useRef<HTMLDivElement>(null);
  const [mapReady, setMapReady] = useState(false);
  const onFeatureClickRef = useRef(onFeatureClick);
  const currentGeoDataRef = useRef<GeoJSONFeatureCollection | null>(null);
  const layersByIdRef = useRef<Map<number, L.Layer>>(new Map());

  useEffect(() => {
    onFeatureClickRef.current = onFeatureClick;
  }, [onFeatureClick]);

  // ── Initialisation carte (une seule fois) ────────────────────────────────
  useEffect(() => {
    if (!mapContainerRef.current || mapRef.current) return;

    console.log('%c🗺️  [MapView] Initializing map...', 'color: #22c55e; font-weight: bold');
    
    try {
      const map = L.map(mapContainerRef.current, {
        center: [7.3697, 12.3547],
        zoom: 6,
        zoomControl: false,
        preferCanvas: true,
        fadeAnimation: false,
        zoomAnimation: true,
        markerZoomAnimation: false,
        attributionControl: false,
      });

      L.control.zoom({ position: 'topright' }).addTo(map);

      L.control.attribution({
        position: 'bottomright',
        prefix: false,
      }).addAttribution(
        '<a href="https://www.maptiler.com/copyright/" target="_blank">© MapTiler</a> ' +
        '<a href="https://www.openstreetmap.org/copyright" target="_blank">© OpenStreetMap</a>'
      ).addTo(map);

      // MapTiler Streets
      L.tileLayer(
        `https://api.maptiler.com/maps/streets-v2/{z}/{x}/{y}.png?key=${MAPTILER_API_KEY}`,
        {
          tileSize: 512,
          zoomOffset: -1,
          minZoom: 1,
          maxZoom: 19,
          crossOrigin: true,
          updateWhenIdle: true,
          updateWhenZooming: false,
          keepBuffer: 4,
        }
      ).addTo(map);

      mapRef.current = map;
      setMapReady(true);
      console.log('%c✅ Map initialized', 'color: #22c55e; font-weight: bold');
    } catch (error) {
      console.error('%c❌ Map init failed:', 'color: #ef4444; font-weight: bold', error);
    }

    return () => {
      if (mapRef.current) {
        console.log('%c🗑️  Cleaning up map', 'color: #f59e0b');
        mapRef.current.remove();
        mapRef.current = null;
        setMapReady(false);
      }
    };
  }, []);

  // ── Mise à jour GeoJSON OPTIMISÉE (incrémentale si possible) ──────────────
  useEffect(() => {
    if (!mapRef.current || !mapReady || !geoData) return;

    const startTime = performance.now();
    
    // Vérifier si on peut faire une mise à jour incrémentale
    const canIncrementalUpdate = 
      currentGeoDataRef.current &&
      currentGeoDataRef.current.features.length === geoData.features.length &&
      geoJsonLayerRef.current;

    if (canIncrementalUpdate) {
      console.log('%c⚡ Incremental style update', 'color: #10b981; font-weight: bold');
      
      // Mise à jour incrémentale des styles uniquement
      geoData.features.forEach((feature) => {
        const id = feature.properties?.id;
        if (!id) return;
        
        const layer = layersByIdRef.current.get(id);
        if (layer && layer instanceof L.Path) {
          const isSelected = id === selectedFeatureId;
          const baseColor = getFeatureColor(feature);
          
          layer.setStyle({
            fillColor: isSelected ? '#22c55e' : baseColor,
            weight: isSelected ? 3 : 1.5,
            opacity: 1,
            color: isSelected ? '#15803d' : '#16a34a',
            fillOpacity: isSelected ? 0.85 : 0.65,
          });
        }
      });
      
      currentGeoDataRef.current = geoData;
      const elapsed = (performance.now() - startTime).toFixed(1);
      console.log(`%c✅ Styles updated in ${elapsed}ms`, 'color: #22c55e; font-weight: bold');
      return;
    }

    // Sinon, re-créer la couche complète
    console.log(`%c🔄 Full GeoJSON update - ${geoData.features.length} features`, 'color: #3b82f6; font-weight: bold');

    if (geoJsonLayerRef.current) {
      mapRef.current.removeLayer(geoJsonLayerRef.current);
      geoJsonLayerRef.current = null;
    }
    
    layersByIdRef.current.clear();

    const geoJsonLayer = L.geoJSON(geoData, {
      style: (feature) => {
        const isSelected = feature?.properties?.id === selectedFeatureId;
        const baseColor = getFeatureColor(feature);

        return {
          fillColor: isSelected ? '#22c55e' : baseColor,
          weight: isSelected ? 3 : 1.5,
          opacity: 1,
          color: isSelected ? '#15803d' : '#16a34a',
          fillOpacity: isSelected ? 0.85 : 0.65,
        };
      },
      onEachFeature: (feature, layer) => {
        const props = feature.properties;
        if (!props) return;

        // Sauvegarder la référence au layer
        if (props.id) {
          layersByIdRef.current.set(props.id, layer);
        }

        const name = props.nom || props.name || 'Sans nom';

        // Tooltip
        const tooltipContent = `
          <div class="font-semibold text-base">${name}</div>
          ${props.population ? `<div class="text-xs mt-1">👥 ${new Intl.NumberFormat('fr-FR').format(props.population)} hab.</div>` : ''}
          ${props.superficie_km2 ? `<div class="text-xs">📏 ${new Intl.NumberFormat('fr-FR').format(props.superficie_km2)} km²</div>` : ''}
          ${props.production_count ? `<div class="text-xs">🌾 ${props.production_count} production(s)</div>` : ''}
          ${props.production_total ? `<div class="text-xs">📊 ${new Intl.NumberFormat('fr-FR').format(props.production_total)} unités</div>` : ''}
        `;

        layer.bindTooltip(tooltipContent, {
          permanent: false,
          direction: 'center',
          className: 'map-tooltip',
          opacity: 0.95,
        });

        // Click handler
        layer.on('click', () => {
          console.log('%c🖱️  Feature clicked:', 'color: #8b5cf6', props);
          if (onFeatureClickRef.current) {
            onFeatureClickRef.current(props);
          }
        });

        // Hover effects
        layer.on('mouseover', function (this: any) {
          if (this.setStyle) {
            this.setStyle({ fillOpacity: 0.9, weight: 2.5 });
          }
        });
        
        layer.on('mouseout', function (this: any) {
          if (this.setStyle) {
            const isSelected = props.id === selectedFeatureId;
            this.setStyle({
              fillOpacity: isSelected ? 0.85 : 0.65,
              weight: isSelected ? 3 : 1.5,
            });
          }
        });
      },
    });

    geoJsonLayer.addTo(mapRef.current);
    geoJsonLayerRef.current = geoJsonLayer;
    currentGeoDataRef.current = geoData;

    // Ajuster la vue
    try {
      const bounds = geoJsonLayer.getBounds();
      if (bounds.isValid()) {
        mapRef.current.fitBounds(bounds, {
          padding: [50, 50],
          animate: true,
          duration: 0.4,
        });
      }
    } catch (error) {
      console.error('%c❌ Bounds error:', 'color: #ef4444', error);
    }

    const elapsed = (performance.now() - startTime).toFixed(1);
    console.log(`%c✅ GeoJSON rendered in ${elapsed}ms`, 'color: #22c55e; font-weight: bold');
  }, [geoData, mapReady, selectedFeatureId, mapLevel]);

  // ── Zoom sur sélection ────────────────────────────────────────────────────
  useEffect(() => {
    if (!mapRef.current || !selectedFeatureId) return;

    const layer = layersByIdRef.current.get(selectedFeatureId);
    if (layer && 'getBounds' in layer) {
      try {
        const bounds = (layer as any).getBounds();
        if (bounds && bounds.isValid()) {
          mapRef.current.fitBounds(bounds, {
            padding: [100, 100],
            maxZoom: 12,
            animate: true,
            duration: 0.6,
          });
        }
      } catch (e) {
        console.error('Zoom error:', e);
      }
    }
  }, [selectedFeatureId]);

  if (loading) {
    return <MapSkeleton />;
  }

  return (
    <div className="relative w-full h-full">
      <div
        ref={mapContainerRef}
        className="w-full h-full rounded-xl overflow-hidden border-2 border-gray-200 dark:border-gray-800 shadow-2xl"
      />

      {!geoData && !loading && mapReady && (
        <div className="absolute inset-0 flex items-center justify-center bg-gray-100/80 dark:bg-gray-900/80 rounded-xl backdrop-blur-sm pointer-events-none">
          <div className="text-center p-8">
            <svg className="mx-auto h-16 w-16 text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
            </svg>
            <p className="text-gray-600 dark:text-gray-400 text-lg font-medium">
              Sélectionnez des filtres pour afficher les données
            </p>
          </div>
        </div>
      )}

      <style jsx global>{`
        .leaflet-container {
          font-family: inherit;
          background: #f3f4f6;
        }
        
        .dark .leaflet-container {
          background: #111827;
        }
        
        .map-tooltip {
          background: rgba(255, 255, 255, 0.98) !important;
          border: 2px solid #22c55e !important;
          border-radius: 10px !important;
          padding: 8px 12px !important;
          font-weight: 600 !important;
          font-size: 13px !important;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
          backdrop-filter: blur(8px) !important;
          pointer-events: none !important;
          line-height: 1.4 !important;
        }
        
        .dark .map-tooltip {
          background: rgba(31, 41, 55, 0.98) !important;
          border-color: #16a34a !important;
          color: white !important;
        }
        
        .leaflet-control-attribution {
          font-size: 9px !important;
          background: rgba(255, 255, 255, 0.8) !important;
          padding: 2px 6px !important;
          border-radius: 4px !important;
        }
        
        .dark .leaflet-control-attribution {
          background: rgba(0, 0, 0, 0.6) !important;
          color: rgba(255, 255, 255, 0.8) !important;
        }
        
        .leaflet-control-attribution a {
          color: #22c55e !important;
          text-decoration: none !important;
        }
        
        .dark .leaflet-control-attribution a {
          color: #86efac !important;
        }
        
        .leaflet-tile {
          will-change: opacity;
        }
        
        .leaflet-zoom-anim .leaflet-zoom-animated {
          will-change: transform;
        }
        
        .leaflet-control-zoom {
          border: none !important;
          border-radius: 8px !important;
          overflow: hidden !important;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
        }
        
        .leaflet-control-zoom a {
          width: 36px !important;
          height: 36px !important;
          line-height: 36px !important;
          font-size: 18px !important;
          background: white !important;
          color: #374151 !important;
          border: none !important;
        }
        
        .dark .leaflet-control-zoom a {
          background: #1f2937 !important;
          color: #e5e7eb !important;
        }
        
        .leaflet-control-zoom a:hover {
          background: #f3f4f6 !important;
          color: #22c55e !important;
        }
        
        .dark .leaflet-control-zoom a:hover {
          background: #374151 !important;
          color: #86efac !important;
        }
      `}</style>
    </div>
  );
});

// Helper: Déterminer la couleur d'une feature
function getFeatureColor(feature: any): string {
  const filiereColors: Record<string, string> = {
    'agriculture': '#22c55e',
    'élevage': '#f59e0b',
    'pêche': '#3b82f6',
    'foresterie': '#10b981',
  };

  const filiere = feature?.properties?.filiere_principale?.toLowerCase();
  if (filiere && filiereColors[filiere]) {
    return filiereColors[filiere];
  }

  // Couleur basée sur la production
  const prodTotal = feature?.properties?.production_total;
  if (prodTotal && prodTotal > 0) {
    // Gradient vert en fonction de la production
    if (prodTotal > 10000) return '#15803d';
    if (prodTotal > 5000) return '#16a34a';
    if (prodTotal > 1000) return '#22c55e';
    return '#4ade80';
  }

  return '#86efac'; // Couleur par défaut
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\components\Sidebar.tsx
================================================================================

'use client';

import { useState, useEffect, useRef } from 'react';
import Link from 'next/link';
import {
  Search, Filter, MapPin, Layers, TrendingUp, X,
  ChevronDown, ChevronRight, Wheat, Package, Calendar,
  ExternalLink, Info,
} from 'lucide-react';
import type { Filiere, CategorieProduit, Produit, MapLevel } from '@/types/api';
import {
  getFilieres, getCategories, getProduits,
  searchFilieres, getAnneesDisponibles,
} from '@/lib/api';
import { SkeletonList } from './Skeleton';

interface SidebarProps {
  onFilterChange   : (filters: any) => void;
  onMapLevelChange : (level: MapLevel) => void;
  selectedEntity   : any;
  currentMapLevel  : MapLevel;
}

export default function Sidebar({
  onFilterChange,
  onMapLevelChange,
  selectedEntity,
  currentMapLevel,
}: SidebarProps) {
  const [searchQuery, setSearchQuery] = useState('');
  const [activeTab, setActiveTab]     = useState<'filters' | 'info'>('filters');

  const [filieres,   setFilieres]   = useState<Filiere[]>([]);
  const [categories, setCategories] = useState<CategorieProduit[]>([]);
  const [produits,   setProduits]   = useState<Produit[]>([]);
  const [annees,     setAnnees]     = useState<number[]>([]);

  const [selectedFiliere,   setSelectedFiliere]   = useState<number | null>(null);
  const [selectedCategorie, setSelectedCategorie] = useState<number | null>(null);
  const [selectedProduit,   setSelectedProduit]   = useState<number | null>(null);
  const [selectedAnnee,     setSelectedAnnee]     = useState<number | null>(null);

  const [openSections, setOpenSections] = useState({
    filieres: true, categories: false, produits: false,
    mapLevel: true, annee: false,
  });

  const [loading, setLoading] = useState(false);

  const prevFiltersRef     = useRef({ filiere_id: null as number|null, categorie_id: null as number|null, produit_id: null as number|null, annee: null as number|null });
  const onFilterChangeRef  = useRef(onFilterChange);
  useEffect(() => { onFilterChangeRef.current = onFilterChange; }, [onFilterChange]);

  // ── Initial load ─────────────────────────────────────────────────────────
  useEffect(() => { loadFilieres(); loadAnnees(); }, []);

  // ── Cascade: filière → catégories ────────────────────────────────────────
  useEffect(() => {
    if (selectedFiliere) {
      loadCategories(selectedFiliere);
      setOpenSections(p => ({ ...p, categories: true }));
    } else {
      setCategories([]);
      setSelectedCategorie(null);
    }
  }, [selectedFiliere]);

  // ── Cascade: catégorie / filière → produits ──────────────────────────────
  useEffect(() => {
    if (selectedCategorie) {
      loadProduits(selectedCategorie, selectedFiliere);
      setOpenSections(p => ({ ...p, produits: true }));
    } else if (selectedFiliere) {
      loadProduits(undefined, selectedFiliere);
    } else {
      setProduits([]);
      setSelectedProduit(null);
    }
  }, [selectedCategorie, selectedFiliere]);

  // ── Notify parent only on real change ────────────────────────────────────
  useEffect(() => {
    const nf = { filiere_id: selectedFiliere, categorie_id: selectedCategorie, produit_id: selectedProduit, annee: selectedAnnee };
    const pv = prevFiltersRef.current;
    if (pv.filiere_id !== nf.filiere_id || pv.categorie_id !== nf.categorie_id || pv.produit_id !== nf.produit_id || pv.annee !== nf.annee) {
      prevFiltersRef.current = nf;
      onFilterChangeRef.current(nf);
    }
  }, [selectedFiliere, selectedCategorie, selectedProduit, selectedAnnee]);

  // ── When entity selected → auto-switch to info tab ───────────────────────
  useEffect(() => {
    if (selectedEntity) setActiveTab('info');
  }, [selectedEntity]);

  // ── Loaders ──────────────────────────────────────────────────────────────
  const loadFilieres = async () => {
    try { setLoading(true); const r = await getFilieres(0, 100); setFilieres(r.items); }
    catch (e) { console.error('loadFilieres', e); }
    finally { setLoading(false); }
  };
  const loadCategories = async (fId: number) => {
    try { const r = await getCategories(0, 100, fId); setCategories(r.items); }
    catch (e) { console.error('loadCategories', e); }
  };
  const loadProduits = async (cId?: number, fId?: number) => {
    try { const r = await getProduits(0, 100, cId, fId); setProduits(r.items); }
    catch (e) { console.error('loadProduits', e); }
  };
  const loadAnnees = async () => {
    try { const d = await getAnneesDisponibles(); setAnnees(d); }
    catch (e) { console.error('loadAnnees', e); }
  };

  const handleSearch = async () => {
    if (searchQuery.trim().length < 2) return;
    try { setLoading(true); setFilieres(await searchFilieres(searchQuery, 10)); }
    catch (e) { console.error('handleSearch', e); }
    finally { setLoading(false); }
  };

  const toggleSection = (s: keyof typeof openSections) =>
    setOpenSections(p => ({ ...p, [s]: !p[s] }));

  const resetFilters = () => {
    setSelectedFiliere(null); setSelectedCategorie(null);
    setSelectedProduit(null); setSelectedAnnee(null);
    setSearchQuery('');
    loadFilieres();
  };

  const mapLevelOptions: { value: MapLevel; label: string; icon: typeof MapPin }[] = [
    { value: 'regions',      label: 'Régions',      icon: MapPin },
    { value: 'departements', label: 'Départements', icon: Layers },
    { value: 'communes',     label: 'Communes',     icon: TrendingUp },
  ];

  // ── Detail URL helper ────────────────────────────────────────────────────
  const detailUrl = selectedEntity
    ? `/map/${selectedEntity.id}?level=${currentMapLevel}`
    : '#';

  // ── Shared button style ──────────────────────────────────────────────────
  const btnBase = (active: boolean) =>
    `w-full px-4 py-2.5 rounded-lg text-left transition-all duration-200 border-2 ${
      active
        ? 'bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300 border-green-500 font-semibold'
        : 'bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-transparent hover:border-green-300 dark:hover:border-green-700 hover:bg-green-50/50 dark:hover:bg-green-900/20'
    }`;

  return (
    <div className="h-full flex flex-col bg-white dark:bg-gray-950 border-r border-gray-200 dark:border-gray-800">
      {/* Header */}
      <div className="p-5 border-b border-gray-200 dark:border-gray-800 bg-gradient-to-r from-green-50 to-white dark:from-gray-900 dark:to-gray-950">
        <h2 className="text-lg font-display font-bold text-gray-900 dark:text-white">Filtres &amp; Recherche</h2>
        <p className="text-xs text-gray-500 dark:text-gray-400 mt-0.5">Données agricoles du Cameroun</p>
      </div>

      {/* Tabs */}
      <div className="flex border-b border-gray-200 dark:border-gray-800">
        {(['filters', 'info'] as const).map(tab => (
          <button
            key={tab}
            onClick={() => setActiveTab(tab)}
            className={`flex-1 py-2.5 text-sm font-medium transition-all flex items-center justify-center gap-1.5 ${
              activeTab === tab
                ? 'border-b-2 border-green-500 text-green-600 dark:text-green-400 bg-green-50/60 dark:bg-green-900/20'
                : 'text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200'
            }`}
          >
            {tab === 'filters' ? <Filter className="w-4 h-4" /> : <Info className="w-4 h-4" />}
            {tab === 'filters' ? 'Filtres' : 'Informations'}
          </button>
        ))}
      </div>

      {/* Content */}
      <div className="flex-1 overflow-y-auto scrollbar-thin p-4 space-y-4">
        {activeTab === 'filters' ? (
          <>
            {/* Search */}
            <div>
              <label className="block text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1.5 flex items-center gap-1.5">
                <Search className="w-3.5 h-3.5" /> Recherche rapide
              </label>
              <div className="relative">
                <input
                  type="text"
                  value={searchQuery}
                  onChange={e => setSearchQuery(e.target.value)}
                  onKeyDown={e => e.key === 'Enter' && handleSearch()}
                  placeholder="Filière, produit…"
                  className="w-full px-3 py-2 pr-9 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all"
                />
                <button onClick={handleSearch} className="absolute right-2 top-1/2 -translate-y-1/2 text-green-600 dark:text-green-400 hover:opacity-70 transition-opacity">
                  <Search className="w-4 h-4" />
                </button>
              </div>
            </div>

            {/* Niveau de visualisation */}
            <div>
              <button onClick={() => toggleSection('mapLevel')} className="w-full flex items-center justify-between text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1.5">
                <span className="flex items-center gap-1.5"><Layers className="w-3.5 h-3.5" /> Niveau</span>
                {openSections.mapLevel ? <ChevronDown className="w-4 h-4" /> : <ChevronRight className="w-4 h-4" />}
              </button>
              {openSections.mapLevel && (
                <div className="flex gap-2">
                  {mapLevelOptions.map(opt => {
                    const Icon = opt.icon;
                    const active = currentMapLevel === opt.value;
                    return (
                      <button key={opt.value} onClick={() => onMapLevelChange(opt.value)}
                        className={`flex-1 py-2 rounded-lg text-center text-xs font-semibold transition-all border-2 flex flex-col items-center gap-0.5 ${
                          active
                            ? 'bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300 border-green-500'
                            : 'bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 border-transparent hover:border-green-300'
                        }`}>
                        <Icon className="w-4 h-4" />
                        {opt.label}
                      </button>
                    );
                  })}
                </div>
              )}
            </div>

            {/* Filières */}
            <div>
              <button onClick={() => toggleSection('filieres')} className="w-full flex items-center justify-between text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1.5">
                <span className="flex items-center gap-1.5"><Wheat className="w-3.5 h-3.5" /> Filières <span className="text-green-600 dark:text-green-400">({filieres.length})</span></span>
                {openSections.filieres ? <ChevronDown className="w-4 h-4" /> : <ChevronRight className="w-4 h-4" />}
              </button>
              {openSections.filieres && (
                <div className="space-y-1.5">
                  {loading ? <SkeletonList count={3} /> : filieres.map(f => (
                    <button key={f.id} onClick={() => setSelectedFiliere(f.id === selectedFiliere ? null : f.id)} className={btnBase(selectedFiliere === f.id)}>
                      <div className="flex items-center gap-2.5">
                        <div className="w-3 h-3 rounded-full flex-shrink-0" style={{ backgroundColor: f.couleur || '#22c55e' }} />
                        <div className="min-w-0">
                          <div className="font-medium truncate text-sm">{f.nom}</div>
                          {f.description && <div className="text-xs text-gray-400 dark:text-gray-500 truncate">{f.description}</div>}
                        </div>
                      </div>
                    </button>
                  ))}
                </div>
              )}
            </div>

            {/* Catégories */}
            {selectedFiliere && categories.length > 0 && (
              <div>
                <button onClick={() => toggleSection('categories')} className="w-full flex items-center justify-between text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1.5">
                  <span className="flex items-center gap-1.5"><Package className="w-3.5 h-3.5" /> Catégories <span className="text-green-600 dark:text-green-400">({categories.length})</span></span>
                  {openSections.categories ? <ChevronDown className="w-4 h-4" /> : <ChevronRight className="w-4 h-4" />}
                </button>
                {openSections.categories && (
                  <div className="space-y-1.5 pl-4 border-l-2 border-green-200 dark:border-green-800 ml-1.5">
                    {categories.map(c => (
                      <button key={c.id} onClick={() => setSelectedCategorie(c.id === selectedCategorie ? null : c.id)} className={btnBase(selectedCategorie === c.id)}>
                        <span className="text-sm">{c.nom}</span>
                      </button>
                    ))}
                  </div>
                )}
              </div>
            )}

            {/* Produits */}
            {produits.length > 0 && (
              <div>
                <button onClick={() => toggleSection('produits')} className="w-full flex items-center justify-between text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1.5">
                  <span className="flex items-center gap-1.5"><Package className="w-3.5 h-3.5" /> Produits <span className="text-green-600 dark:text-green-400">({produits.length})</span></span>
                  {openSections.produits ? <ChevronDown className="w-4 h-4" /> : <ChevronRight className="w-4 h-4" />}
                </button>
                {openSections.produits && (
                  <div className="space-y-1.5 pl-4 border-l-2 border-green-100 dark:border-green-900 ml-1.5">
                    {produits.slice(0, 12).map(p => (
                      <button key={p.id} onClick={() => setSelectedProduit(p.id === selectedProduit ? null : p.id)} className={btnBase(selectedProduit === p.id)}>
                        <div className="text-sm font-medium">{p.nom}</div>
                        {p.unite_mesure && <div className="text-xs text-gray-400 dark:text-gray-500">Unité : {p.unite_mesure}</div>}
                      </button>
                    ))}
                  </div>
                )}
              </div>
            )}

            {/* Année */}
            <div>
              <button onClick={() => toggleSection('annee')} className="w-full flex items-center justify-between text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1.5">
                <span className="flex items-center gap-1.5"><Calendar className="w-3.5 h-3.5" /> Année</span>
                {openSections.annee ? <ChevronDown className="w-4 h-4" /> : <ChevronRight className="w-4 h-4" />}
              </button>
              {openSections.annee && annees.length > 0 && (
                <select value={selectedAnnee || ''} onChange={e => setSelectedAnnee(e.target.value ? Number(e.target.value) : null)}
                  className="w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none">
                  <option value="">Toutes les années</option>
                  {annees.map(a => <option key={a} value={a}>{a}</option>)}
                </select>
              )}
            </div>

            {/* Reset */}
            <button onClick={resetFilters} className="w-full px-4 py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-1.5">
              <X className="w-4 h-4" /> Réinitialiser
            </button>
          </>
        ) : (
          /* ── Info tab ─────────────────────────────────────────────────────── */
          <div className="space-y-3">
            {selectedEntity ? (
              <>
                {/* Entity card */}
                <div className="anim-slideUp bg-gradient-to-br from-green-50 to-white dark:from-gray-900 dark:to-gray-950 rounded-xl p-5 border-2 border-green-200 dark:border-green-800">
                  <div className="flex items-start justify-between mb-3">
                    <h3 className="text-base font-display font-bold text-gray-900 dark:text-white">
                      {selectedEntity.nom || 'Information'}
                    </h3>
                    <span className="text-xs bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 px-2 py-0.5 rounded-full font-semibold capitalize">
                      {currentMapLevel.slice(0, -1)}
                    </span>
                  </div>

                  <div className="space-y-2">
                    {Object.entries(selectedEntity).map(([key, value]) => {
                      if (['id','created_at','updated_at'].includes(key) || !value) return null;
                      if (key === 'nom') return null; // already shown as title
                      return (
                        <div key={key} className="flex items-baseline justify-between border-b border-gray-100 dark:border-gray-800 pb-1.5">
                          <span className="text-xs text-gray-400 dark:text-gray-500 uppercase tracking-wide">{key.replace(/_/g, ' ')}</span>
                          <span className="text-sm text-gray-800 dark:text-gray-200 font-medium text-right max-w-[55%] truncate">
                            {Array.isArray(value) ? value.join(', ') : String(value)}
                          </span>
                        </div>
                      );
                    })}
                  </div>
                </div>

                {/* Voir Plus button */}
                <Link
                  href={detailUrl}
                  className="anim-slideUp delay-100 flex items-center justify-center gap-2.5 w-full px-5 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02]"
                >
                  <ExternalLink className="w-5 h-5" />
                  Voir plus — Page détail
                </Link>
              </>
            ) : (
              <div className="text-center py-16 anim-fadeIn">
                <div className="w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center">
                  <MapPin className="w-8 h-8 text-gray-300 dark:text-gray-600" />
                </div>
                <p className="text-sm text-gray-500 dark:text-gray-400">
                  Cliquez sur une zone de la carte pour voir ses informations
                </p>
              </div>
            )}
          </div>
        )}
      </div>
    </div>
  );
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\components\Skeleton.tsx
================================================================================

'use client';

import React from 'react';

export const SkeletonCard = () => (
  <div className="bg-white dark:bg-gray-900 rounded-xl p-4 border border-gray-200 dark:border-gray-800 animate-pulse">
    <div className="h-6 bg-gray-200 dark:bg-gray-800 rounded w-3/4 mb-3 animate-shimmer"></div>
    <div className="space-y-2">
      <div className="h-4 bg-gray-200 dark:bg-gray-800 rounded animate-shimmer"></div>
      <div className="h-4 bg-gray-200 dark:bg-gray-800 rounded w-5/6 animate-shimmer"></div>
    </div>
  </div>
);

export const SkeletonList = ({ count = 3 }: { count?: number }) => (
  <div className="space-y-3">
    {Array.from({ length: count }).map((_, i) => (
      <SkeletonCard key={i} />
    ))}
  </div>
);

export const SkeletonMap = () => (
  <div className="w-full h-full bg-gray-100 dark:bg-gray-900 animate-pulse flex items-center justify-center">
    <div className="text-center">
      <div className="inline-block w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mb-4"></div>
      <p className="text-gray-600 dark:text-gray-400 font-medium">Chargement de la carte...</p>
    </div>
  </div>
);

export const SkeletonStat = () => (
  <div className="bg-white dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-800 animate-pulse">
    <div className="flex items-center justify-between mb-3">
      <div className="h-8 w-8 bg-gray-200 dark:bg-gray-800 rounded-lg animate-shimmer"></div>
      <div className="h-4 w-16 bg-gray-200 dark:bg-gray-800 rounded animate-shimmer"></div>
    </div>
    <div className="h-8 bg-gray-200 dark:bg-gray-800 rounded w-24 mb-2 animate-shimmer"></div>
    <div className="h-4 bg-gray-200 dark:bg-gray-800 rounded w-32 animate-shimmer"></div>
  </div>
);


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\components\ThemeToggle.tsx
================================================================================

'use client';

import { useEffect, useState } from 'react';
import { Moon, Sun } from 'lucide-react';

export default function ThemeToggle() {
  const [theme, setTheme] = useState<'light' | 'dark'>('light');
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
    // Détecter le thème du navigateur au chargement
    const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const savedTheme = localStorage.getItem('theme') as 'light' | 'dark' | null;
    const initialTheme = savedTheme || (isDark ? 'dark' : 'light');
    
    setTheme(initialTheme);
    document.documentElement.classList.toggle('dark', initialTheme === 'dark');

    // Écouter les changements de préférence du système
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    const handleChange = (e: MediaQueryListEvent) => {
      if (!localStorage.getItem('theme')) {
        const newTheme = e.matches ? 'dark' : 'light';
        setTheme(newTheme);
        document.documentElement.classList.toggle('dark', newTheme === 'dark');
      }
    };

    mediaQuery.addEventListener('change', handleChange);
    return () => mediaQuery.removeEventListener('change', handleChange);
  }, []);

  const toggleTheme = () => {
    const newTheme = theme === 'light' ? 'dark' : 'light';
    setTheme(newTheme);
    localStorage.setItem('theme', newTheme);
    document.documentElement.classList.toggle('dark', newTheme === 'dark');
  };

  if (!mounted) {
    return <div className="w-10 h-10" />;
  }

  return (
    <button
      onClick={toggleTheme}
      className="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-300 transform hover:scale-110"
      aria-label="Toggle theme"
      style={{
        animation: 'slideDown 0.5s ease-out',
      }}
    >
      {theme === 'light' ? (
        <Moon className="w-5 h-5 text-gray-700 dark:text-gray-300" />
      ) : (
        <Sun className="w-5 h-5 text-yellow-500" />
      )}
    </button>
  );
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\components\DetailMap.tsx
================================================================================

'use client';

import { useEffect, useRef } from 'react';
import L from 'leaflet';
import 'leaflet/dist/leaflet.css';

const MAPTILER_API_KEY = "Lr72DkH8TYyjpP7RNZS9";

interface DetailMapProps {
  geoData: any;
  targetId: number;
}

export default function DetailMap({ geoData, targetId }: DetailMapProps) {
  const containerRef = useRef<HTMLDivElement>(null);
  const mapRef = useRef<L.Map | null>(null);

  useEffect(() => {
    if (!containerRef.current || !geoData) return;

    // Destroy previous instance
    if (mapRef.current) {
      mapRef.current.remove();
      mapRef.current = null;
    }

    console.log('%c🗺️  [DetailMap] Initializing detail map with MapTiler', 'color: #22c55e; font-weight: bold');

    const map = L.map(containerRef.current, {
      center: [7.3697, 12.3547],
      zoom: 6,
      zoomControl: true,
      preferCanvas: true,
      fadeAnimation: true,
      attributionControl: false,
    });

    // Attribution
    L.control.attribution({
      position: 'bottomright',
      prefix: false,
    }).addAttribution(
      '<a href="https://www.maptiler.com/copyright/" target="_blank">© MapTiler</a>'
    ).addTo(map);

    // MapTiler Satellite Hybrid (Pour les détails)
    L.tileLayer(
      `https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=${MAPTILER_API_KEY}`,
      {
        tileSize: 512,
        zoomOffset: -1,
        minZoom: 1,
        maxZoom: 20,
        crossOrigin: true,
      }
    ).addTo(map);

    let targetBounds: L.LatLngBounds | null = null;

    L.geoJSON(geoData, {
      style: (feature: any) => {
        const isTarget = feature?.properties?.id === targetId;
        return {
          fillColor: isTarget ? '#22c55e' : '#d1fae5',
          weight: isTarget ? 4 : 1.5,
          opacity: 1,
          color: isTarget ? '#15803d' : '#86efac',
          fillOpacity: isTarget ? 0.75 : 0.3,
        };
      },
      onEachFeature: (feature, layer) => {
        const name = feature.properties?.nom || feature.properties?.name || '';
        if (name) {
          layer.bindTooltip(name, {
            permanent: feature.properties?.id === targetId,
            direction: 'center',
            className: 'detail-map-tooltip',
          });
        }
        if (feature.properties?.id === targetId) {
          try {
            targetBounds = (layer as any).getBounds();
          } catch (_) {}
        }
      },
    }).addTo(map);

    // Zoom into target
    if (targetBounds && (targetBounds as L.LatLngBounds).isValid()) {
      map.fitBounds(targetBounds as L.LatLngBounds, {
        padding: [40, 40],
        maxZoom: 13,
        animate: true,
        duration: 0.8,
      });
    }

    mapRef.current = map;

    return () => {
      map.remove();
      mapRef.current = null;
    };
  }, [geoData, targetId]);

  return (
    <>
      <div ref={containerRef} className="w-full h-full" />
      <style jsx global>{`
        .detail-map-tooltip {
          background: rgba(34, 197, 94, 0.95) !important;
          border: 2px solid #15803d !important;
          border-radius: 8px !important;
          padding: 8px 12px !important;
          font-weight: 700 !important;
          font-size: 14px !important;
          color: white !important;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
        }
      `}</style>
    </>
  );
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\lib\api.ts
================================================================================

// ─── Service API avec cache optimisé + console logging ──────────────────────
import type {
  Region, Departement, Commune, Filiere, CategorieProduit, Produit,
  Production, Infrastructure, ApiResponse, GeoJSONFeatureCollection,
  StatistiquesGlobales, ZoneHalieutique, BassinProduction, SourceDonnees,
} from '@/types/api';

const API_BASE_URL = 'https://apiti.onrender.com';

// ─── Cache amélioré (TTL 10 min pour GeoJSON, 5 min pour le reste) ──────────
const CACHE_TTL_GEOJSON = 10 * 60 * 1000; // 10 minutes pour GeoJSON
const CACHE_TTL_DEFAULT = 5 * 60 * 1000;  // 5 minutes pour le reste

interface CacheEntry<T> { data: T; timestamp: number; }
const cache = new Map<string, CacheEntry<any>>();

function getFromCache<T>(key: string, ttl: number = CACHE_TTL_DEFAULT): T | null {
  const e = cache.get(key);
  if (!e) return null;
  if (Date.now() - e.timestamp > ttl) { 
    cache.delete(key); 
    return null; 
  }
  return e.data as T;
}

function setInCache<T>(key: string, data: T) { 
  cache.set(key, { data, timestamp: Date.now() }); 
}

// ─── Nettoyage périodique du cache ───────────────────────────────────────────
setInterval(() => {
  const now = Date.now();
  for (const [key, entry] of cache.entries()) {
    if (now - entry.timestamp > CACHE_TTL_GEOJSON) {
      cache.delete(key);
    }
  }
}, 60000); // Nettoie toutes les minutes

// ─── Core fetch optimisé ─────────────────────────────────────────────────────
async function fetchAPI<T>(
  endpoint: string, 
  options?: RequestInit & { useCache?: boolean; cacheTTL?: number }
): Promise<T> {
  const url = `${API_BASE_URL}${endpoint}`;
  const useCache = options?.useCache ?? false;
  const cacheTTL = options?.cacheTTL ?? CACHE_TTL_DEFAULT;

  if (useCache) {
    const cached = getFromCache<T>(endpoint, cacheTTL);
    if (cached) {
      console.log('%c[API ⚡ CACHE] %c' + endpoint, 'color:#10b981;font-weight:700', 'color:#6b7280');
      return cached;
    }
  }

  console.log('%c[API →] %c' + endpoint, 'color:#3b82f6;font-weight:700', 'color:#6b7280');
  const start = performance.now();

  try {
    const { useCache: _, cacheTTL: __, ...fetchOpts } = options || {};
    const response = await fetch(url, { 
      ...fetchOpts, 
      headers: { 
        'Content-Type': 'application/json', 
        ...fetchOpts?.headers 
      },
      // Ajout de timeout
      signal: AbortSignal.timeout(15000) // 15 secondes max
    });
    
    const elapsed = (performance.now() - start).toFixed(1);

    if (!response.ok) {
      const errText = await response.text();
      console.error('%c[API ✕] %c' + endpoint + ' — ' + response.status, 'color:#ef4444;font-weight:700', 'color:#6b7280', errText);
      throw new Error(`API Error: ${response.status} - ${errText}`);
    }

    const data = await response.json();
    console.log('%c[API ✓] %c' + endpoint + ' %c(' + elapsed + ' ms)', 'color:#22c55e;font-weight:700', 'color:#6b7280', 'color:#9ca3af');
    
    if (useCache) setInCache(endpoint, data);
    return data;
  } catch (error) {
    if (error instanceof Error && error.name === 'TimeoutError') {
      console.error('%c[API ⏱️  TIMEOUT] %c' + endpoint, 'color:#f59e0b;font-weight:700', 'color:#6b7280');
    } else {
      console.error('%c[API ✕] %c' + endpoint, 'color:#ef4444;font-weight:700', 'color:#6b7280', error);
    }
    throw error;
  }
}

// ─── RÉGIONS ─────────────────────────────────────────────────────────────────
export const getRegions = (skip=0, limit=100) => 
  fetchAPI<ApiResponse<Region>>(`/api/v1/regions/?skip=${skip}&limit=${limit}`, {useCache:true});

export const searchRegions = (q:string, limit=10) => 
  fetchAPI<Region[]>(`/api/v1/regions/search?q=${encodeURIComponent(q)}&limit=${limit}`);

export const getRegion = (id:number) => 
  fetchAPI<Region>(`/api/v1/regions/${id}`, {useCache:true});

export const getRegionDepartements = (id:number) => 
  fetchAPI<Departement[]>(`/api/v1/regions/${id}/departements`, {useCache:true});

export const getRegionProductions = (id:number, annee?:number, produitId?:number, limit=100) => {
  let u = `/api/v1/regions/${id}/productions?limit=${limit}`;
  if(annee) u+=`&annee=${annee}`; 
  if(produitId) u+=`&produit_id=${produitId}`;
  return fetchAPI<Production[]>(u);
};

// ─── DÉPARTEMENTS ───────────────────────────────────────────────────────────
export const getDepartements = (skip=0, limit=100, regionId?:number) => {
  let u = `/api/v1/departements/?skip=${skip}&limit=${limit}`;
  if(regionId) u+=`&region_id=${regionId}`;
  return fetchAPI<ApiResponse<Departement>>(u, {useCache:true});
};

export const searchDepartements = (q:string, limit=10) => 
  fetchAPI<Departement[]>(`/api/v1/departements/search?q=${encodeURIComponent(q)}&limit=${limit}`);

export const getDepartement = (id:number) => 
  fetchAPI<Departement>(`/api/v1/departements/${id}`, {useCache:true});

export const getDepartementCommunes = (id:number) => 
  fetchAPI<Commune[]>(`/api/v1/departements/${id}/communes`, {useCache:true});

export const getDepartementProductions = (id:number, annee?:number, produitId?:number, limit=100) => {
  let u = `/api/v1/departements/${id}/productions?limit=${limit}`;
  if(annee) u+=`&annee=${annee}`; 
  if(produitId) u+=`&produit_id=${produitId}`;
  return fetchAPI<Production[]>(u);
};

// ─── COMMUNES ────────────────────────────────────────────────────────────────
export const getCommunes = (skip=0, limit=100, deptId?:number, type?:string) => {
  let u = `/api/v1/communes/?skip=${skip}&limit=${limit}`;
  if(deptId) u+=`&departement_id=${deptId}`; 
  if(type) u+=`&type_commune=${type}`;
  return fetchAPI<ApiResponse<Commune>>(u, {useCache:true});
};

export const searchCommunes = (q:string, limit=10, deptId?:number) => {
  let u = `/api/v1/communes/search?q=${encodeURIComponent(q)}&limit=${limit}`;
  if(deptId) u+=`&departement_id=${deptId}`;
  return fetchAPI<Commune[]>(u);
};

export const getCommune = (id:number) => 
  fetchAPI<Commune>(`/api/v1/communes/${id}`, {useCache:true});

export const getCommuneInfrastructures = (id:number) => 
  fetchAPI<Infrastructure[]>(`/api/v1/communes/${id}/infrastructures`, {useCache:true});

export const getCommuneProductions = (id:number, annee?:number, produitId?:number, limit=100) => {
  let u = `/api/v1/communes/${id}/productions?limit=${limit}`;
  if(annee) u+=`&annee=${annee}`; 
  if(produitId) u+=`&produit_id=${produitId}`;
  return fetchAPI<Production[]>(u);
};

export const getCommuneResume = (id:number) => 
  fetchAPI<any>(`/api/v1/communes/${id}/resume`, {useCache:true});

// ─── FILIÈRES ────────────────────────────────────────────────────────────────
export const getFilieres = (skip=0, limit=100) => 
  fetchAPI<ApiResponse<Filiere>>(`/api/v1/filieres/?skip=${skip}&limit=${limit}`, {useCache:true});

export const searchFilieres = (q:string, limit=10) => 
  fetchAPI<Filiere[]>(`/api/v1/filieres/search?q=${encodeURIComponent(q)}&limit=${limit}`);

export const getFiliere = (id:number) => 
  fetchAPI<Filiere>(`/api/v1/filieres/${id}`, {useCache:true});

export const getFiliereCategories = (id:number) => 
  fetchAPI<CategorieProduit[]>(`/api/v1/filieres/${id}/categories`, {useCache:true});

export const getFiliereProduits = (id:number) => 
  fetchAPI<Produit[]>(`/api/v1/filieres/${id}/produits`, {useCache:true});

// ─── CATÉGORIES ──────────────────────────────────────────────────────────────
export const getCategories = (skip=0, limit=100, filiereId?:number) => {
  let u = `/api/v1/categories/?skip=${skip}&limit=${limit}`;
  if(filiereId) u+=`&filiere_id=${filiereId}`;
  return fetchAPI<ApiResponse<CategorieProduit>>(u, {useCache:true});
};

export const getCategorie = (id:number) => 
  fetchAPI<CategorieProduit>(`/api/v1/categories/${id}`, {useCache:true});

export const getCategorieProduits = (id:number) => 
  fetchAPI<Produit[]>(`/api/v1/categories/${id}/produits`, {useCache:true});

// ─── PRODUITS ────────────────────────────────────────────────────────────────
export const getProduits = (skip=0, limit=100, catId?:number, filId?:number) => {
  let u = `/api/v1/produits/?skip=${skip}&limit=${limit}`;
  if(catId) u+=`&categorie_id=${catId}`; 
  if(filId) u+=`&filiere_id=${filId}`;
  return fetchAPI<ApiResponse<Produit>>(u, {useCache:true});
};

export const searchProduits = (q:string, limit=10, catId?:number, filId?:number) => {
  let u = `/api/v1/produits/search?q=${encodeURIComponent(q)}&limit=${limit}`;
  if(catId) u+=`&categorie_id=${catId}`; 
  if(filId) u+=`&filiere_id=${filId}`;
  return fetchAPI<Produit[]>(u);
};

export const getProduit = (id:number) => 
  fetchAPI<Produit>(`/api/v1/produits/${id}`, {useCache:true});

export const getProduitResume = (id:number, annee?:number) => {
  let u = `/api/v1/produits/${id}/resume`; 
  if(annee) u+=`?annee=${annee}`;
  return fetchAPI<any>(u);
};

// ─── PRODUCTIONS ─────────────────────────────────────────────────────────────
export const getProductions = (params: Record<string,any>) => {
  const sp = new URLSearchParams();
  Object.entries(params).forEach(([k,v])=> { 
    if(v!=null) sp.append(k,String(v)); 
  });
  return fetchAPI<ApiResponse<Production>>(`/api/v1/productions/?${sp}`);
};

export const getAnneesDisponibles = () => 
  fetchAPI<number[]>(`/api/v1/productions/annees`, {useCache:true, cacheTTL: CACHE_TTL_GEOJSON});

export const getSaisonsDisponibles = () => 
  fetchAPI<string[]>(`/api/v1/productions/saisons`, {useCache:true, cacheTTL: CACHE_TTL_GEOJSON});

export const getProductionsResume = (annee?:number) => 
  fetchAPI<any>(`/api/v1/productions/resume${annee?'?annee='+annee:''}`);

export const getProductionsParAnnee = (produitId?:number, regionId?:number, anneeDebut?:number, anneeFin?:number) => {
  const p = new URLSearchParams();
  if(produitId) p.append('produit_id',String(produitId));
  if(regionId) p.append('region_id',String(regionId));
  if(anneeDebut) p.append('annee_debut',String(anneeDebut));
  if(anneeFin) p.append('annee_fin',String(anneeFin));
  return fetchAPI<any>(`/api/v1/productions/par-annee${p.toString()?'?'+p:''}`);
};

export const getProductionsParRegion = (annee?:number, produitId?:number) => {
  const p=new URLSearchParams(); 
  if(annee) p.append('annee',String(annee)); 
  if(produitId) p.append('produit_id',String(produitId));
  return fetchAPI<any>(`/api/v1/productions/par-region${p.toString()?'?'+p:''}`);
};

export const getProductionsParProduit = (annee?:number, regionId?:number) => {
  const p=new URLSearchParams(); 
  if(annee) p.append('annee',String(annee)); 
  if(regionId) p.append('region_id',String(regionId));
  return fetchAPI<any>(`/api/v1/productions/par-produit${p.toString()?'?'+p:''}`);
};

// ─── BASSINS ─────────────────────────────────────────────────────────────────
export const getBassins = (skip=0,limit=100,filId?:number) => {
  let u=`/api/v1/bassins/?skip=${skip}&limit=${limit}`; 
  if(filId) u+=`&filiere_id=${filId}`;
  return fetchAPI<ApiResponse<BassinProduction>>(u,{useCache:true});
};

export const searchBassins = (q:string,limit=10) => 
  fetchAPI<BassinProduction[]>(`/api/v1/bassins/search?q=${encodeURIComponent(q)}&limit=${limit}`);

export const getBassin = (id:number) => 
  fetchAPI<BassinProduction>(`/api/v1/bassins/${id}`,{useCache:true});

export const getBassinGeoJSON = (id:number) => 
  fetchAPI<GeoJSONFeatureCollection>(`/api/v1/bassins/${id}/geojson`,{useCache:true, cacheTTL: CACHE_TTL_GEOJSON});

export const getBassinsFilierGeoJSON = (id:number)=> 
  fetchAPI<GeoJSONFeatureCollection>(`/api/v1/bassins/filiere/${id}/geojson`,{useCache:true, cacheTTL: CACHE_TTL_GEOJSON});

// ─── ZONES HALIEUTIQUES ──────────────────────────────────────────────────────
export const getZonesHalieutiques = (skip=0,limit=100,type?:string) => {
  let u=`/api/v1/zones-halieutiques/?skip=${skip}&limit=${limit}`; 
  if(type) u+=`&type_zone=${type}`;
  return fetchAPI<ApiResponse<ZoneHalieutique>>(u,{useCache:true});
};

export const getTypesZones = () => 
  fetchAPI<string[]>(`/api/v1/zones-halieutiques/types`,{useCache:true, cacheTTL: CACHE_TTL_GEOJSON});

export const getZoneHalieutique = (id:number) => 
  fetchAPI<ZoneHalieutique>(`/api/v1/zones-halieutiques/${id}`,{useCache:true});

export const getZoneHalieutiqueGeoJSON = (id:number) => 
  fetchAPI<GeoJSONFeatureCollection>(`/api/v1/zones-halieutiques/${id}/geojson`,{useCache:true, cacheTTL: CACHE_TTL_GEOJSON});

// ─── INFRASTRUCTURES ────────────────────────────────────────────────────────
export const getInfrastructures = (skip=0,limit=100,type?:string,communeId?:number) => {
  let u=`/api/v1/infrastructures/?skip=${skip}&limit=${limit}`;
  if(type) u+=`&type_infrastructure=${type}`; 
  if(communeId) u+=`&commune_id=${communeId}`;
  return fetchAPI<ApiResponse<Infrastructure>>(u,{useCache:true});
};

export const getTypesInfrastructures = () => 
  fetchAPI<string[]>(`/api/v1/infrastructures/types`,{useCache:true, cacheTTL: CACHE_TTL_GEOJSON});

export const getStatsInfrastructures = () => 
  fetchAPI<any>(`/api/v1/infrastructures/stats`,{useCache:true});

export const getInfrastructure = (id:number) => 
  fetchAPI<Infrastructure>(`/api/v1/infrastructures/${id}`,{useCache:true});

export const getInfrastructureGeoJSON = (id:number) => 
  fetchAPI<GeoJSONFeatureCollection>(`/api/v1/infrastructures/${id}/geojson`,{useCache:true, cacheTTL: CACHE_TTL_GEOJSON});

// ─── STATISTIQUES ────────────────────────────────────────────────────────────
export const getStatistiquesGlobales = () => 
  fetchAPI<StatistiquesGlobales>(`/api/v1/statistiques/globales`,{useCache:true, cacheTTL: CACHE_TTL_GEOJSON});

export const getStatistiquesProduction = (annee?:number) => 
  fetchAPI<any>(`/api/v1/statistiques/production${annee?'?annee='+annee:''}`);

export const getEvolutionProduction = (produitId?:number,regionId?:number,anneeDebut?:number,anneeFin?:number) => {
  const p=new URLSearchParams();
  if(produitId) p.append('produit_id',String(produitId)); 
  if(regionId) p.append('region_id',String(regionId));
  if(anneeDebut) p.append('annee_debut',String(anneeDebut)); 
  if(anneeFin) p.append('annee_fin',String(anneeFin));
  return fetchAPI<any>(`/api/v1/statistiques/evolution${p.toString()?'?'+p:''}`);
};

export const getTopRegions = (annee?:number,produitId?:number,limit=10) => {
  let u=`/api/v1/statistiques/top-regions?limit=${limit}`;
  if(annee) u+=`&annee=${annee}`; 
  if(produitId) u+=`&produit_id=${produitId}`;
  return fetchAPI<any>(u);
};

export const getTopProduits = (annee?:number,regionId?:number,limit=10) => {
  let u=`/api/v1/statistiques/top-produits?limit=${limit}`;
  if(annee) u+=`&annee=${annee}`; 
  if(regionId) u+=`&region_id=${regionId}`;
  return fetchAPI<any>(u);
};

export const comparerAnnees = (ref:number,cmp:number,produitId?:number,regionId?:number) => {
  let u=`/api/v1/statistiques/comparaison/annees?annee_reference=${ref}&annee_comparaison=${cmp}`;
  if(produitId) u+=`&produit_id=${produitId}`; 
  if(regionId) u+=`&region_id=${regionId}`;
  return fetchAPI<any>(u);
};

// ─── SOURCES ─────────────────────────────────────────────────────────────────
export const getSources = (skip=0,limit=100) => 
  fetchAPI<ApiResponse<SourceDonnees>>(`/api/v1/sources/?skip=${skip}&limit=${limit}`,{useCache:true});

export const getSource = (id:number) => 
  fetchAPI<SourceDonnees>(`/api/v1/sources/${id}`,{useCache:true});

// ─── GEOJSON (Cache long - 10 min) ──────────────────────────────────────────
export const getRegionsGeoJSON = () => 
  fetchAPI<GeoJSONFeatureCollection>(`/api/v1/geojson/regions`,{useCache:true, cacheTTL: CACHE_TTL_GEOJSON});

export const getDepartementsGeoJSON = (regionId?:number) => 
  fetchAPI<GeoJSONFeatureCollection>(
    `/api/v1/geojson/departements${regionId?'?region_id='+regionId:''}`,
    {useCache:true, cacheTTL: CACHE_TTL_GEOJSON}
  );

export const getCommunesGeoJSON = (deptId?:number) => 
  fetchAPI<GeoJSONFeatureCollection>(
    `/api/v1/geojson/communes${deptId?'?departement_id='+deptId:''}`,
    {useCache:true, cacheTTL: CACHE_TTL_GEOJSON}
  );

export const getZonesHalieutiquesGeoJSON = (type?:string) => 
  fetchAPI<GeoJSONFeatureCollection>(
    `/api/v1/geojson/zones-halieutiques${type?'?type_zone='+type:''}`,
    {useCache:true, cacheTTL: CACHE_TTL_GEOJSON}
  );

export const getBassinsGeoJSON = (filId?:number) => 
  fetchAPI<GeoJSONFeatureCollection>(
    `/api/v1/geojson/bassins${filId?'?filiere_id='+filId:''}`,
    {useCache:true, cacheTTL: CACHE_TTL_GEOJSON}
  );

export const getInfrastructuresGeoJSON = (type?:string,communeId?:number) => {
  const p=new URLSearchParams(); 
  if(type) p.append('type_infrastructure',type); 
  if(communeId) p.append('commune_id',String(communeId));
  return fetchAPI<GeoJSONFeatureCollection>(
    `/api/v1/geojson/infrastructures${p.toString()?'?'+p:''}`,
    {useCache:true, cacheTTL: CACHE_TTL_GEOJSON}
  );
};


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\types\api.ts
================================================================================

// ─── Types pour l'API Cameroun WebMapping ───────────────────────────────────

export interface Region {
  id: number;
  nom: string;
  code_region: string;
  chef_lieu: string | null;
  superficie_km2: number | null;
  population: number | null;
  created_at: string | null;
  updated_at: string | null;
}

export interface Departement {
  id: number;
  nom: string;
  code_departement: string;
  chef_lieu: string | null;
  superficie_km2: number | null;
  population: number | null;
  region_id: number;
  created_at: string | null;
  updated_at: string | null;
}

export interface Commune {
  id: number;
  nom: string;
  code_commune: string;
  departement_id: number;
  type_commune: string | null;
  population: number | null;
  superficie_km2: number | null;
  created_at: string | null;
  updated_at: string | null;
}

export interface Filiere {
  id: number;
  nom: string;
  code: string;
  description: string | null;
  couleur: string | null;
  icone: string | null;
  created_at: string | null;
}

export interface CategorieProduit {
  id: number;
  nom: string;
  code: string;
  filiere_id: number;
  description: string | null;
  icone: string | null;
  created_at: string | null;
}

export interface Produit {
  id: number;
  nom: string;
  code: string;
  categorie_id: number;
  nom_scientifique: string | null;
  unite_mesure: string | null;
  description: string | null;
  icone: string | null;
  couleur: string | null;
  created_at: string | null;
}

export interface Production {
  id: number;
  produit_id: number;
  annee: number;
  region_id: number | null;
  departement_id: number | null;
  commune_id: number | null;
  saison: string | null;
  quantite: number | null;
  valeur_fcfa: number | null;
  superficie_ha: number | null;
  rendement: number | null;
  nombre_producteurs: number | null;
  source_donnees: string | null;
  fiabilite: string | null;
  notes: string | null;
  created_at: string | null;
  updated_at: string | null;
}

export interface Infrastructure {
  id: number;
  nom: string;
  type_infrastructure: string | null;
  commune_id: number | null;
  capacite: string | null;
  adresse: string | null;
  contact: string | null;
  created_at: string | null;
}

export interface ZoneHalieutique {
  id: number;
  nom: string;
  type_zone: string | null;
  superficie_km2: number | null;
  departements_concernes: string[] | null;
  especes_principales: string[] | null;
  created_at: string | null;
}

export interface BassinProduction {
  id: number;
  nom: string;
  code: string;
  filiere_id: number;
  description: string | null;
  produits_dominants: string[] | null;
  importance: string | null;
  created_at: string | null;
}

export interface SourceDonnees {
  id: number;
  nom: string;
  code: string;
  description: string | null;
  url: string | null;
  contact: string | null;
  fiabilite: string | null;
  created_at: string | null;
}

// ─── GeoJSON ─────────────────────────────────────────────────────────────────
export interface GeoJSONFeature {
  type: 'Feature';
  geometry: { type: string; coordinates: any };
  properties: Record<string, any>;
}

export interface GeoJSONFeatureCollection {
  type: 'FeatureCollection';
  features: GeoJSONFeature[];
}

// ─── API wrappers ────────────────────────────────────────────────────────────
export interface ApiResponse<T> {
  total: number;
  items: T[];
}

export interface StatistiquesGlobales {
  total_regions: number;
  total_departements: number;
  total_communes: number;
  total_filieres: number;
  total_produits: number;
  total_productions: number;
}

// ─── Stats types (loose – backend returns dynamic shapes) ───────────────────
export interface ProductionParAnnee {
  annee: number;
  total_quantite?: number;
  total_valeur_fcfa?: number;
  nombre_productions?: number;
  [key: string]: any;
}

export interface TopRegionItem {
  region_id?: number;
  nom?: string;
  total_quantite?: number;
  total_valeur_fcfa?: number;
  nombre_productions?: number;
  [key: string]: any;
}

export interface TopProduitItem {
  produit_id?: number;
  nom?: string;
  total_quantite?: number;
  total_valeur_fcfa?: number;
  nombre_productions?: number;
  [key: string]: any;
}

export interface ComparaisonAnnees {
  annee_reference: number;
  annee_comparaison: number;
  [key: string]: any;
}

// ─── App ─────────────────────────────────────────────────────────────────────
export type MapLevel = 'regions' | 'departements' | 'communes';

export interface FilterState {
  filiere_id: number | null;
  categorie_id: number | null;
  produit_id: number | null;
  annee: number | null;
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\utils\helper.ts
================================================================================

// Utilitaires pour l'application

/**
 * Formate un nombre avec séparateurs de milliers
 */
export const formatNumber = (num: number): string => {
  return new Intl.NumberFormat('fr-FR').format(num);
};

/**
 * Formate une valeur monétaire en FCFA
 */
export const formatCurrency = (value: number): string => {
  return `${formatNumber(value)} FCFA`;
};

/**
 * Formate une superficie en hectares ou km²
 */
export const formatSuperficie = (value: number, unit: 'ha' | 'km2' = 'ha'): string => {
  return `${formatNumber(value)} ${unit === 'ha' ? 'ha' : 'km²'}`;
};

/**
 * Tronque un texte avec ellipse
 */
export const truncateText = (text: string, maxLength: number = 50): string => {
  if (text.length <= maxLength) return text;
  return text.slice(0, maxLength) + '...';
};

/**
 * Génère une couleur aléatoire pour les visualisations
 */
export const generateRandomColor = (): string => {
  const colors = [
    '#22c55e', // green-500
    '#10b981', // emerald-500
    '#14b8a6', // teal-500
    '#06b6d4', // cyan-500
    '#3b82f6', // blue-500
    '#6366f1', // indigo-500
    '#8b5cf6', // violet-500
    '#a855f7', // purple-500
  ];
  return colors[Math.floor(Math.random() * colors.length)];
};

/**
 * Détermine la couleur en fonction d'une valeur
 */
export const getColorByValue = (value: number, max: number): string => {
  const percentage = (value / max) * 100;
  
  if (percentage >= 75) return '#22c55e'; // vert foncé
  if (percentage >= 50) return '#86efac'; // vert clair
  if (percentage >= 25) return '#fbbf24'; // jaune
  return '#f87171'; // rouge
};

/**
 * Calcule le pourcentage
 */
export const calculatePercentage = (value: number, total: number): number => {
  if (total === 0) return 0;
  return Math.round((value / total) * 100);
};

/**
 * Formate une date
 */
export const formatDate = (date: string | Date): string => {
  return new Intl.DateTimeFormat('fr-FR', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }).format(new Date(date));
};

/**
 * Génère un ID unique
 */
export const generateId = (): string => {
  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
};

/**
 * Debounce une fonction
 */
export const debounce = <T extends (...args: any[]) => any>(
  func: T,
  wait: number
): ((...args: Parameters<T>) => void) => {
  let timeout: NodeJS.Timeout;
  
  return (...args: Parameters<T>) => {
    clearTimeout(timeout);
    timeout = setTimeout(() => func(...args), wait);
  };
};

/**
 * Classe CSS conditionnelle
 */
export const cn = (...classes: (string | boolean | undefined | null)[]): string => {
  return classes.filter(Boolean).join(' ');
};

/**
 * Vérifie si une valeur est vide
 */
export const isEmpty = (value: any): boolean => {
  if (value === null || value === undefined) return true;
  if (typeof value === 'string') return value.trim().length === 0;
  if (Array.isArray(value)) return value.length === 0;
  if (typeof value === 'object') return Object.keys(value).length === 0;
  return false;
};

/**
 * Extrait les coordonnées d'un objet GeoJSON
 */
export const extractCoordinates = (geometry: any): [number, number] | null => {
  if (!geometry || !geometry.coordinates) return null;
  
  try {
    if (geometry.type === 'Point') {
      return [geometry.coordinates[1], geometry.coordinates[0]];
    }
    if (geometry.type === 'Polygon') {
      const coords = geometry.coordinates[0][0];
      return [coords[1], coords[0]];
    }
    if (geometry.type === 'MultiPolygon') {
      const coords = geometry.coordinates[0][0][0];
      return [coords[1], coords[0]];
    }
  } catch (error) {
    console.error('Erreur lors de l\'extraction des coordonnées:', error);
  }
  
  return null;
};

/**
 * Calcule le centre d'un polygon
 */
export const calculateCenter = (coordinates: number[][][]): [number, number] => {
  let totalLat = 0;
  let totalLng = 0;
  let count = 0;
  
  coordinates[0].forEach(([lng, lat]) => {
    totalLat += lat;
    totalLng += lng;
    count++;
  });
  
  return [totalLat / count, totalLng / count];
};

/**
 * Trie un tableau d'objets par propriété
 */
export const sortBy = <T>(
  array: T[],
  key: keyof T,
  order: 'asc' | 'desc' = 'asc'
): T[] => {
  return [...array].sort((a, b) => {
    const aVal = a[key];
    const bVal = b[key];
    
    if (aVal === bVal) return 0;
    
    const comparison = aVal > bVal ? 1 : -1;
    return order === 'asc' ? comparison : -comparison;
  });
};

/**
 * Groupe un tableau par propriété
 */
export const groupBy = <T>(
  array: T[],
  key: keyof T
): Record<string, T[]> => {
  return array.reduce((acc, item) => {
    const group = String(item[key]);
    if (!acc[group]) {
      acc[group] = [];
    }
    acc[group].push(item);
    return acc;
  }, {} as Record<string, T[]>);
};

/**
 * Convertit une chaîne en slug
 */
export const slugify = (text: string): string => {
  return text
    .toString()
    .toLowerCase()
    .trim()
    .replace(/\s+/g, '-')
    .replace(/[^\w\-]+/g, '')
    .replace(/\-\-+/g, '-');
};

/**
 * Copie du texte dans le presse-papiers
 */
export const copyToClipboard = async (text: string): Promise<boolean> => {
  try {
    await navigator.clipboard.writeText(text);
    return true;
  } catch (error) {
    console.error('Erreur lors de la copie:', error);
    return false;
  }
};

/**
 * Télécharge un fichier JSON
 */
export const downloadJSON = (data: any, filename: string): void => {
  const blob = new Blob([JSON.stringify(data, null, 2)], {
    type: 'application/json',
  });
  const url = URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = filename;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(url);
};

/**
 * Télécharge un fichier CSV
 */
export const downloadCSV = (data: any[], filename: string): void => {
  if (data.length === 0) return;
  
  const headers = Object.keys(data[0]).join(',');
  const rows = data.map(obj => 
    Object.values(obj).map(val => `"${val}"`).join(',')
  );
  const csv = [headers, ...rows].join('\n');
  
  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
  const url = URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = filename;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(url);
};


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\utils\constant.ts
================================================================================

// Constantes de l'application

export const APP_NAME = 'AgriVision';
export const APP_DESCRIPTION = 'Plateforme de cartographie des données agricoles du Cameroun';

// Configuration de la carte
export const MAP_CONFIG = {
  DEFAULT_CENTER: [7.3697, 12.3547] as [number, number], // Centre du Cameroun
  DEFAULT_ZOOM: 6,
  MIN_ZOOM: 5,
  MAX_ZOOM: 18,
  TILE_URL: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
  ATTRIBUTION: '© OpenStreetMap contributors',
} as const;

// Couleurs des niveaux de carte
export const MAP_LEVEL_COLORS = {
  regions: {
    fill: '#86efac',
    border: '#16a34a',
    selected: '#22c55e',
  },
  departements: {
    fill: '#6ee7b7',
    border: '#059669',
    selected: '#10b981',
  },
  communes: {
    fill: '#5eead4',
    border: '#0d9488',
    selected: '#14b8a6',
  },
} as const;

// Limites de pagination
export const PAGINATION = {
  DEFAULT_LIMIT: 100,
  MAX_LIMIT: 500,
  DEFAULT_SKIP: 0,
} as const;

// Délais pour les opérations asynchrones
export const DELAYS = {
  DEBOUNCE_SEARCH: 500,
  AUTO_REFRESH: 60000, // 1 minute
  TOAST_DURATION: 3000,
  ANIMATION_DURATION: 300,
} as const;

// Messages d'erreur
export const ERROR_MESSAGES = {
  NETWORK_ERROR: 'Erreur de connexion. Veuillez vérifier votre connexion internet.',
  API_ERROR: 'Erreur lors de la récupération des données. Veuillez réessayer.',
  NOT_FOUND: 'Ressource non trouvée.',
  UNKNOWN_ERROR: 'Une erreur inattendue s\'est produite.',
  EMPTY_RESULT: 'Aucun résultat trouvé.',
} as const;

// Messages de succès
export const SUCCESS_MESSAGES = {
  DATA_LOADED: 'Données chargées avec succès',
  FILTER_APPLIED: 'Filtres appliqués',
  COPIED: 'Copié dans le presse-papiers',
} as const;

// Types de filières (exemples)
export const FILIERE_TYPES = [
  'Agriculture',
  'Élevage',
  'Pêche',
  'Foresterie',
] as const;

// Types de communes
export const COMMUNE_TYPES = [
  'urbaine',
  'rurale',
] as const;

// Types de zones halieutiques
export const ZONE_HALIEUTIQUE_TYPES = [
  'maritime',
  'fluviale',
  'lacustre',
] as const;

// Types d'infrastructures
export const INFRASTRUCTURE_TYPES = [
  'marché',
  'entrepôt',
  'coopérative',
  'usine_transformation',
  'point_collecte',
] as const;

// Unités de mesure
export const UNITES_MESURE = [
  'kg',
  'tonne',
  'litre',
  'unité',
  'sac',
] as const;

// Niveaux de fiabilité
export const NIVEAUX_FIABILITE = [
  'haute',
  'moyenne',
  'faible',
] as const;

// Saisons
export const SAISONS = [
  'saison_sèche',
  'saison_pluies',
  'toute_année',
] as const;

// Régions du Cameroun (pour référence)
export const CAMEROUN_REGIONS = [
  'Adamaoua',
  'Centre',
  'Est',
  'Extrême-Nord',
  'Littoral',
  'Nord',
  'Nord-Ouest',
  'Ouest',
  'Sud',
  'Sud-Ouest',
] as const;

// Routes de l'application
export const ROUTES = {
  HOME: '/',
  MAP: '/map',
  ABOUT: '/about',
  STATS: '/stats',
} as const;

// Configuration du thème
export const THEME = {
  COLORS: {
    primary: {
      50: '#f0fdf4',
      100: '#dcfce7',
      200: '#bbf7d0',
      300: '#86efac',
      400: '#4ade80',
      500: '#22c55e',
      600: '#16a34a',
      700: '#15803d',
      800: '#166534',
      900: '#14532d',
      950: '#052e16',
    },
  },
  FONTS: {
    display: 'Montserrat, system-ui, sans-serif',
    body: 'Open Sans, system-ui, sans-serif',
  },
} as const;

// Tailles d'écran (breakpoints Tailwind)
export const BREAKPOINTS = {
  sm: 640,
  md: 768,
  lg: 1024,
  xl: 1280,
  '2xl': 1536,
} as const;

// Configuration du cache
export const CACHE_CONFIG = {
  ENABLED: true,
  TTL: 300000, // 5 minutes
  MAX_SIZE: 100, // nombre maximum d'entrées
} as const;

// Formats d'export
export const EXPORT_FORMATS = [
  'json',
  'csv',
  'geojson',
  'pdf',
] as const;

// Configuration des animations
export const ANIMATION_CONFIG = {
  EASE: 'ease-out',
  DURATION: {
    fast: 150,
    normal: 300,
    slow: 500,
  },
} as const;

// Icônes par filière (mapping)
export const FILIERE_ICONS: Record<string, string> = {
  agriculture: '🌾',
  elevage: '🐄',
  peche: '🐟',
  foresterie: '🌳',
} as const;

// Emojis pour les statistiques
export const STAT_EMOJIS = {
  production: '📊',
  superficie: '📏',
  producteurs: '👥',
  valeur: '💰',
  rendement: '📈',
} as const;


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\eslint.config.mjs
================================================================================

import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals";
import nextTs from "eslint-config-next/typescript";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;



================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\next-env.d.ts
================================================================================

/// <reference types="next" />
/// <reference types="next/image-types/global" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/building-your-application/configuring/typescript for more information.



================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\README.md
================================================================================

# 🌿 AgriVision

Plateforme web moderne de cartographie interactive pour visualiser et analyser les données de production agricole, pastorale et halieutique du Cameroun.

## ✨ Fonctionnalités

- 🗺️ **Carte Interactive** - Visualisation des divisions administratives (régions, départements, communes)
- 🌾 **Filières Agricoles** - Exploration des différentes filières et leurs produits
- 📊 **Statistiques Détaillées** - Données de production avec filtres multiples
- 🎨 **Design Moderne** - Interface élégante avec support du mode sombre/clair
- ⚡ **Performance Optimale** - Chargement rapide avec skeleton screens
- 📱 **Responsive** - Interface adaptée à tous les écrans
- 🔍 **Recherche Avancée** - Recherche et filtrage par filière, catégorie, produit, année
- 🗺️ **Zoom Intelligent** - Zoom automatique sur les zones sélectionnées
- 📈 **Visualisations** - Graphiques et statistiques en temps réel

## 🚀 Technologies

- **Next.js 14** - Framework React avec App Router
- **TypeScript** - Typage statique
- **Tailwind CSS** - Framework CSS utilitaire
- **Leaflet** - Bibliothèque de cartographie
- **Lucide React** - Icônes modernes
- **API Backend** - https://apiti.onrender.com

## 📦 Installation

### Prérequis

- Node.js 18+ 
- npm ou yarn

### Installation des dépendances

```bash
npm install
# ou
yarn install
```

### Lancement en développement

```bash
npm run dev
# ou
yarn dev
```

Ouvrez [http://localhost:3000](http://localhost:3000) dans votre navigateur.

### Build de production

```bash
npm run build
npm start
# ou
yarn build
yarn start
```

## 🎨 Structure du Projet

```
cameroun-agro-map/
├── app/                      # Pages Next.js (App Router)
│   ├── layout.tsx           # Layout principal
│   ├── page.tsx             # Page d'accueil
│   ├── map/                 # Page de la carte
│   │   └── page.tsx
│   └── globals.css          # Styles globaux
├── components/               # Composants réutilisables
│   ├── MapView.tsx          # Composant de la carte Leaflet
│   ├── Sidebar.tsx          # Barre latérale avec filtres
│   ├── Skeleton.tsx         # Composants de chargement
│   └── ThemeToggle.tsx      # Bouton de changement de thème
├── lib/                      # Utilitaires et services
│   └── api.ts               # Service API avec logging
├── types/                    # Types TypeScript
│   └── api.ts               # Types pour l'API
├── public/                   # Fichiers statiques
├── tailwind.config.js       # Configuration Tailwind
├── tsconfig.json            # Configuration TypeScript
└── package.json             # Dépendances
```

## 🔧 Configuration

### API Backend

L'application utilise l'API backend à l'adresse : `https://apiti.onrender.com`

Pour modifier l'URL de l'API, éditez le fichier `lib/api.ts` :

```typescript
const API_BASE_URL = 'https://apiti.onrender.com';
```

### Thème de couleurs

Le thème principal utilise des tons de vert. Pour personnaliser, modifiez `tailwind.config.js` :

```javascript
colors: {
  primary: {
    50: '#f0fdf4',
    // ... autres nuances
  },
}
```

## 📚 Utilisation

### Page d'accueil

- Affiche les statistiques globales
- Présente les fonctionnalités principales
- Liens vers la carte interactive

### Carte Interactive

1. **Filtres** - Sélectionnez une filière, catégorie ou produit
2. **Niveau de carte** - Choisissez entre régions, départements ou communes
3. **Recherche** - Recherchez des éléments spécifiques
4. **Interaction** - Cliquez sur une zone pour voir les détails
5. **Zoom** - La carte zoome automatiquement sur la sélection

### Logging

Toutes les requêtes API sont loggées dans la console du navigateur avec :
- 🔗 URL de la requête
- 📋 Méthode HTTP
- ✅ Réponse (en cas de succès)
- ❌ Erreur (en cas d'échec)

## 🎯 Routes API Principales

- `/api/v1/regions/` - Liste des régions
- `/api/v1/departements/` - Liste des départements
- `/api/v1/communes/` - Liste des communes
- `/api/v1/filieres/` - Liste des filières
- `/api/v1/produits/` - Liste des produits
- `/api/v1/productions/` - Données de production
- `/api/v1/geojson/regions` - GeoJSON des régions
- `/api/v1/statistiques/globales` - Statistiques globales

Voir la documentation Swagger complète : [https://apiti.onrender.com/docs](https://apiti.onrender.com/docs)

## 🌙 Mode Sombre

L'application détecte automatiquement les préférences du navigateur et s'adapte au mode clair/sombre. 
Un bouton de basculement est disponible dans l'en-tête.

## 🤝 Contribution

Les contributions sont les bienvenues ! N'hésitez pas à ouvrir une issue ou une pull request.

## 📄 Licence

Ce projet est développé dans le cadre du projet 5GI 2025-2026.

## 👥 Auteurs

Projet réalisé par un groupe d'étudiants pour la cartographie des bassins de production du Cameroun.

---

**Note** : Cette application utilise les données ouvertes des organismes publics camerounais et est destinée à des fins éducatives et de visualisation.


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\tsconfig.json
================================================================================

{
  "compilerOptions": {
    "target": "ES2017",
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./*"
      ]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
, "tailwind.config.js"  ],
  "exclude": [
    "node_modules"
  ]
}



================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\package.json
================================================================================

{
  "name": "cameroun-agro-map",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "next": "16.0.1",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "leaflet": "^1.9.4",
    "react-leaflet": "^4.2.1",
    "lucide-react": "^0.263.1"
  },
  "devDependencies": {
    "@types/node": "^20",
    "@types/react": "^18",
    "@types/react-dom": "^18",
    "@types/leaflet": "^1.9.8",
    "typescript": "^5",
    "tailwindcss": "^3.4.1",
    "postcss": "^8.4.35",
    "autoprefixer": "^10.4.17"
  }
}


================================================================================
FICHIER: D:\5GI\Projet-TI\webmap\package-lock.json
================================================================================

{
  "name": "cameroun-agro-map",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "cameroun-agro-map",
      "version": "1.0.0",
      "dependencies": {
        "leaflet": "^1.9.4",
        "lucide-react": "^0.263.1",
        "next": "16.0.1",
        "react": "^18.3.1",
        "react-dom": "^18.3.1",
        "react-leaflet": "^4.2.1"
      },
      "devDependencies": {
        "@types/leaflet": "^1.9.8",
        "@types/node": "^20",
        "@types/react": "^18",
        "@types/react-dom": "^18",
        "autoprefixer": "^10.4.17",
        "postcss": "^8.4.35",
        "tailwindcss": "^3.4.1",
        "typescript": "^5"
      }
    },
    "node_modules/@alloc/quick-lru": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@alloc/quick-lru/-/quick-lru-5.2.0.tgz",
      "integrity": "sha512-UrcABB+4bUrFABwbluTIBErXwvbsU/V7TZWfmbgJfbkwiBuziS9gxdODUyuiecfdGQ85jglMW6juS3+z5TsKLw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@emnapi/runtime": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/@emnapi/runtime/-/runtime-1.8.1.tgz",
      "integrity": "sha512-mehfKSMWjjNol8659Z8KxEMrdSJDDot5SXMq00dM8BN4o+CLNXQ0xH2V7EchNHV4RmbZLmmPdEaXZc5H2FXmDg==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@img/colour": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/@img/colour/-/colour-1.0.0.tgz",
      "integrity": "sha512-A5P/LfWGFSl6nsckYtjw9da+19jB8hkJ6ACTGcDfEJ0aE+l2n2El7dsVM7UVHZQ9s2lmYMWlrS21YLy2IR1LUw==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@img/sharp-darwin-arm64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-darwin-arm64/-/sharp-darwin-arm64-0.34.5.tgz",
      "integrity": "sha512-imtQ3WMJXbMY4fxb/Ndp6HBTNVtWCUI0WdobyheGf5+ad6xX8VIDO8u2xE4qc/fr08CKG/7dDseFtn6M6g/r3w==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-darwin-arm64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-darwin-x64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-darwin-x64/-/sharp-darwin-x64-0.34.5.tgz",
      "integrity": "sha512-YNEFAF/4KQ/PeW0N+r+aVVsoIY0/qxxikF2SWdp+NRkmMB7y9LBZAVqQ4yhGCm/H3H270OSykqmQMKLBhBJDEw==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-darwin-x64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-libvips-darwin-arm64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-arm64/-/sharp-libvips-darwin-arm64-1.2.4.tgz",
      "integrity": "sha512-zqjjo7RatFfFoP0MkQ51jfuFZBnVE2pRiaydKJ1G/rHZvnsrHAOcQALIi9sA5co5xenQdTugCvtb1cuf78Vf4g==",
      "cpu": [
        "arm64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "darwin"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-darwin-x64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-x64/-/sharp-libvips-darwin-x64-1.2.4.tgz",
      "integrity": "sha512-1IOd5xfVhlGwX+zXv2N93k0yMONvUlANylbJw1eTah8K/Jtpi15KC+WSiaX/nBmbm2HxRM1gZ0nSdjSsrZbGKg==",
      "cpu": [
        "x64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "darwin"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-arm": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm/-/sharp-libvips-linux-arm-1.2.4.tgz",
      "integrity": "sha512-bFI7xcKFELdiNCVov8e44Ia4u2byA+l3XtsAj+Q8tfCwO6BQ8iDojYdvoPMqsKDkuoOo+X6HZA0s0q11ANMQ8A==",
      "cpu": [
        "arm"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-arm64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm64/-/sharp-libvips-linux-arm64-1.2.4.tgz",
      "integrity": "sha512-excjX8DfsIcJ10x1Kzr4RcWe1edC9PquDRRPx3YVCvQv+U5p7Yin2s32ftzikXojb1PIFc/9Mt28/y+iRklkrw==",
      "cpu": [
        "arm64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-ppc64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-ppc64/-/sharp-libvips-linux-ppc64-1.2.4.tgz",
      "integrity": "sha512-FMuvGijLDYG6lW+b/UvyilUWu5Ayu+3r2d1S8notiGCIyYU/76eig1UfMmkZ7vwgOrzKzlQbFSuQfgm7GYUPpA==",
      "cpu": [
        "ppc64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-riscv64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-riscv64/-/sharp-libvips-linux-riscv64-1.2.4.tgz",
      "integrity": "sha512-oVDbcR4zUC0ce82teubSm+x6ETixtKZBh/qbREIOcI3cULzDyb18Sr/Wcyx7NRQeQzOiHTNbZFF1UwPS2scyGA==",
      "cpu": [
        "riscv64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-s390x": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-s390x/-/sharp-libvips-linux-s390x-1.2.4.tgz",
      "integrity": "sha512-qmp9VrzgPgMoGZyPvrQHqk02uyjA0/QrTO26Tqk6l4ZV0MPWIW6LTkqOIov+J1yEu7MbFQaDpwdwJKhbJvuRxQ==",
      "cpu": [
        "s390x"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-x64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-x64/-/sharp-libvips-linux-x64-1.2.4.tgz",
      "integrity": "sha512-tJxiiLsmHc9Ax1bz3oaOYBURTXGIRDODBqhveVHonrHJ9/+k89qbLl0bcJns+e4t4rvaNBxaEZsFtSfAdquPrw==",
      "cpu": [
        "x64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linuxmusl-arm64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-arm64/-/sharp-libvips-linuxmusl-arm64-1.2.4.tgz",
      "integrity": "sha512-FVQHuwx1IIuNow9QAbYUzJ+En8KcVm9Lk5+uGUQJHaZmMECZmOlix9HnH7n1TRkXMS0pGxIJokIVB9SuqZGGXw==",
      "cpu": [
        "arm64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linuxmusl-x64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-x64/-/sharp-libvips-linuxmusl-x64-1.2.4.tgz",
      "integrity": "sha512-+LpyBk7L44ZIXwz/VYfglaX/okxezESc6UxDSoyo2Ks6Jxc4Y7sGjpgU9s4PMgqgjj1gZCylTieNamqA1MF7Dg==",
      "cpu": [
        "x64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-linux-arm": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm/-/sharp-linux-arm-0.34.5.tgz",
      "integrity": "sha512-9dLqsvwtg1uuXBGZKsxem9595+ujv0sJ6Vi8wcTANSFpwV/GONat5eCkzQo/1O6zRIkh0m/8+5BjrRr7jDUSZw==",
      "cpu": [
        "arm"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-arm": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linux-arm64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm64/-/sharp-linux-arm64-0.34.5.tgz",
      "integrity": "sha512-bKQzaJRY/bkPOXyKx5EVup7qkaojECG6NLYswgktOZjaXecSAeCWiZwwiFf3/Y+O1HrauiE3FVsGxFg8c24rZg==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-arm64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linux-ppc64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-ppc64/-/sharp-linux-ppc64-0.34.5.tgz",
      "integrity": "sha512-7zznwNaqW6YtsfrGGDA6BRkISKAAE1Jo0QdpNYXNMHu2+0dTrPflTLNkpc8l7MUP5M16ZJcUvysVWWrMefZquA==",
      "cpu": [
        "ppc64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-ppc64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linux-riscv64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-riscv64/-/sharp-linux-riscv64-0.34.5.tgz",
      "integrity": "sha512-51gJuLPTKa7piYPaVs8GmByo7/U7/7TZOq+cnXJIHZKavIRHAP77e3N2HEl3dgiqdD/w0yUfiJnII77PuDDFdw==",
      "cpu": [
        "riscv64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-riscv64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linux-s390x": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-s390x/-/sharp-linux-s390x-0.34.5.tgz",
      "integrity": "sha512-nQtCk0PdKfho3eC5MrbQoigJ2gd1CgddUMkabUj+rBevs8tZ2cULOx46E7oyX+04WGfABgIwmMC0VqieTiR4jg==",
      "cpu": [
        "s390x"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-s390x": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linux-x64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-x64/-/sharp-linux-x64-0.34.5.tgz",
      "integrity": "sha512-MEzd8HPKxVxVenwAa+JRPwEC7QFjoPWuS5NZnBt6B3pu7EG2Ge0id1oLHZpPJdn3OQK+BQDiw9zStiHBTJQQQQ==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-x64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linuxmusl-arm64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-arm64/-/sharp-linuxmusl-arm64-0.34.5.tgz",
      "integrity": "sha512-fprJR6GtRsMt6Kyfq44IsChVZeGN97gTD331weR1ex1c1rypDEABN6Tm2xa1wE6lYb5DdEnk03NZPqA7Id21yg==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linuxmusl-arm64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linuxmusl-x64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-x64/-/sharp-linuxmusl-x64-0.34.5.tgz",
      "integrity": "sha512-Jg8wNT1MUzIvhBFxViqrEhWDGzqymo3sV7z7ZsaWbZNDLXRJZoRGrjulp60YYtV4wfY8VIKcWidjojlLcWrd8Q==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linuxmusl-x64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-wasm32": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-wasm32/-/sharp-wasm32-0.34.5.tgz",
      "integrity": "sha512-OdWTEiVkY2PHwqkbBI8frFxQQFekHaSSkUIJkwzclWZe64O1X4UlUjqqqLaPbUpMOQk6FBu/HtlGXNblIs0huw==",
      "cpu": [
        "wasm32"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later AND MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/runtime": "^1.7.0"
      },
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-win32-arm64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-win32-arm64/-/sharp-win32-arm64-0.34.5.tgz",
      "integrity": "sha512-WQ3AgWCWYSb2yt+IG8mnC6Jdk9Whs7O0gxphblsLvdhSpSTtmu69ZG1Gkb6NuvxsNACwiPV6cNSZNzt0KPsw7g==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-win32-ia32": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-win32-ia32/-/sharp-win32-ia32-0.34.5.tgz",
      "integrity": "sha512-FV9m/7NmeCmSHDD5j4+4pNI8Cp3aW+JvLoXcTUo0IqyjSfAZJ8dIUmijx1qaJsIiU+Hosw6xM5KijAWRJCSgNg==",
      "cpu": [
        "ia32"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-win32-x64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-win32-x64/-/sharp-win32-x64-0.34.5.tgz",
      "integrity": "sha512-+29YMsqY2/9eFEiW93eqWnuLcWcufowXewwSNIT6UwZdUUCrM3oFjMWH/Z6/TMmb4hlFenmfAVbpWeup2jryCw==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@next/env": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/@next/env/-/env-16.0.1.tgz",
      "integrity": "sha512-LFvlK0TG2L3fEOX77OC35KowL8D7DlFF45C0OvKMC4hy8c/md1RC4UMNDlUGJqfCoCS2VWrZ4dSE6OjaX5+8mw==",
      "license": "MIT"
    },
    "node_modules/@next/swc-darwin-arm64": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/@next/swc-darwin-arm64/-/swc-darwin-arm64-16.0.1.tgz",
      "integrity": "sha512-R0YxRp6/4W7yG1nKbfu41bp3d96a0EalonQXiMe+1H9GTHfKxGNCGFNWUho18avRBPsO8T3RmdWuzmfurlQPbg==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-darwin-x64": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/@next/swc-darwin-x64/-/swc-darwin-x64-16.0.1.tgz",
      "integrity": "sha512-kETZBocRux3xITiZtOtVoVvXyQLB7VBxN7L6EPqgI5paZiUlnsgYv4q8diTNYeHmF9EiehydOBo20lTttCbHAg==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-arm64-gnu": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-gnu/-/swc-linux-arm64-gnu-16.0.1.tgz",
      "integrity": "sha512-hWg3BtsxQuSKhfe0LunJoqxjO4NEpBmKkE+P2Sroos7yB//OOX3jD5ISP2wv8QdUwtRehMdwYz6VB50mY6hqAg==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-arm64-musl": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-musl/-/swc-linux-arm64-musl-16.0.1.tgz",
      "integrity": "sha512-UPnOvYg+fjAhP3b1iQStcYPWeBFRLrugEyK/lDKGk7kLNua8t5/DvDbAEFotfV1YfcOY6bru76qN9qnjLoyHCQ==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-x64-gnu": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-gnu/-/swc-linux-x64-gnu-16.0.1.tgz",
      "integrity": "sha512-Et81SdWkcRqAJziIgFtsFyJizHoWne4fzJkvjd6V4wEkWTB4MX6J0uByUb0peiJQ4WeAt6GGmMszE5KrXK6WKg==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-x64-musl": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-musl/-/swc-linux-x64-musl-16.0.1.tgz",
      "integrity": "sha512-qBbgYEBRrC1egcG03FZaVfVxrJm8wBl7vr8UFKplnxNRprctdP26xEv9nJ07Ggq4y1adwa0nz2mz83CELY7N6Q==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-win32-arm64-msvc": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/@next/swc-win32-arm64-msvc/-/swc-win32-arm64-msvc-16.0.1.tgz",
      "integrity": "sha512-cPuBjYP6I699/RdbHJonb3BiRNEDm5CKEBuJ6SD8k3oLam2fDRMKAvmrli4QMDgT2ixyRJ0+DTkiODbIQhRkeQ==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-win32-x64-msvc": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/@next/swc-win32-x64-msvc/-/swc-win32-x64-msvc-16.0.1.tgz",
      "integrity": "sha512-XeEUJsE4JYtfrXe/LaJn3z1pD19fK0Q6Er8Qoufi+HqvdO4LEPyCxLUt4rxA+4RfYo6S9gMlmzCMU2F+AatFqQ==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@react-leaflet/core": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/@react-leaflet/core/-/core-2.1.0.tgz",
      "integrity": "sha512-Qk7Pfu8BSarKGqILj4x7bCSZ1pjuAPZ+qmRwH5S7mDS91VSbVVsJSrW4qA+GPrro8t69gFYVMWb1Zc4yFmPiVg==",
      "license": "Hippocratic-2.1",
      "peerDependencies": {
        "leaflet": "^1.9.0",
        "react": "^18.0.0",
        "react-dom": "^18.0.0"
      }
    },
    "node_modules/@swc/helpers": {
      "version": "0.5.15",
      "resolved": "https://registry.npmjs.org/@swc/helpers/-/helpers-0.5.15.tgz",
      "integrity": "sha512-JQ5TuMi45Owi4/BIMAJBoSQoOJu12oOk/gADqlcUL9JEdHB8vyjUSsxqeNXnmXHjYKMi2WcYtezGEEhqUI/E2g==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.8.0"
      }
    },
    "node_modules/@types/geojson": {
      "version": "7946.0.16",
      "resolved": "https://registry.npmjs.org/@types/geojson/-/geojson-7946.0.16.tgz",
      "integrity": "sha512-6C8nqWur3j98U6+lXDfTUWIfgvZU+EumvpHKcYjujKH7woYyLj2sUmff0tRhrqM7BohUw7Pz3ZB1jj2gW9Fvmg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/leaflet": {
      "version": "1.9.21",
      "resolved": "https://registry.npmjs.org/@types/leaflet/-/leaflet-1.9.21.tgz",
      "integrity": "sha512-TbAd9DaPGSnzp6QvtYngntMZgcRk+igFELwR2N99XZn7RXUdKgsXMR+28bUO0rPsWp8MIu/f47luLIQuSLYv/w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/geojson": "*"
      }
    },
    "node_modules/@types/node": {
      "version": "20.19.30",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-20.19.30.tgz",
      "integrity": "sha512-WJtwWJu7UdlvzEAUm484QNg5eAoq5QR08KDNx7g45Usrs2NtOPiX8ugDqmKdXkyL03rBqU5dYNYVQetEpBHq2g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "undici-types": "~6.21.0"
      }
    },
    "node_modules/@types/prop-types": {
      "version": "15.7.15",
      "resolved": "https://registry.npmjs.org/@types/prop-types/-/prop-types-15.7.15.tgz",
      "integrity": "sha512-F6bEyamV9jKGAFBEmlQnesRPGOQqS2+Uwi0Em15xenOxHaf2hv6L8YCVn3rPdPJOiJfPiCnLIRyvwVaqMY3MIw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/react": {
      "version": "18.3.27",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-18.3.27.tgz",
      "integrity": "sha512-cisd7gxkzjBKU2GgdYrTdtQx1SORymWyaAFhaxQPK9bYO9ot3Y5OikQRvY0VYQtvwjeQnizCINJAenh/V7MK2w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/prop-types": "*",
        "csstype": "^3.2.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "18.3.7",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-18.3.7.tgz",
      "integrity": "sha512-MEe3UeoENYVFXzoXEWsvcpg6ZvlrFNlOQ7EOsvhI3CfAXwzPfO8Qwuxd40nepsYKqyyVQnTdEfv68q91yLcKrQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "^18.0.0"
      }
    },
    "node_modules/any-promise": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/any-promise/-/any-promise-1.3.0.tgz",
      "integrity": "sha512-7UvmKalWRt1wgjL1RrGxoSJW/0QZFIegpeGvZG9kjp8vrRu55XTHbwnqq2GpXm9uLbcuhxm3IqX9OB4MZR1b2A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/anymatch": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.3.tgz",
      "integrity": "sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/anymatch/node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/arg": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/arg/-/arg-5.0.2.tgz",
      "integrity": "sha512-PYjyFOLKQ9y57JvQ6QLo8dAgNqswh8M1RMJYdQduT6xbWSgK36P/Z/v+p888pM69jMMfS8Xd8F6I1kQ/I9HUGg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/autoprefixer": {
      "version": "10.4.24",
      "resolved": "https://registry.npmjs.org/autoprefixer/-/autoprefixer-10.4.24.tgz",
      "integrity": "sha512-uHZg7N9ULTVbutaIsDRoUkoS8/h3bdsmVJYZ5l3wv8Cp/6UIIoRDm90hZ+BwxUj/hGBEzLxdHNSKuFpn8WOyZw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/autoprefixer"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "browserslist": "^4.28.1",
        "caniuse-lite": "^1.0.30001766",
        "fraction.js": "^5.3.4",
        "picocolors": "^1.1.1",
        "postcss-value-parser": "^4.2.0"
      },
      "bin": {
        "autoprefixer": "bin/autoprefixer"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      },
      "peerDependencies": {
        "postcss": "^8.1.0"
      }
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.9.19",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.9.19.tgz",
      "integrity": "sha512-ipDqC8FrAl/76p2SSWKSI+H9tFwm7vYqXQrItCuiVPt26Km0jS+NzSsBWAaBusvSbQcfJG+JitdMm+wZAgTYqg==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/binary-extensions": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.3.0.tgz",
      "integrity": "sha512-Ceh+7ox5qe7LJuLHoY0feh3pHuUDHAcRUeyL2VYghZwfpkNIy/+8Ocg0a3UuSoYzavmylwuLWQOf3hl0jjMMIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.28.1",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.28.1.tgz",
      "integrity": "sha512-ZC5Bd0LgJXgwGqUknZY/vkUQ04r8NXnJZ3yYi4vDmSiZmC/pdSN0NbNRPxZpbtO4uAfDUAFffO8IZoM3Gj8IkA==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "baseline-browser-mapping": "^2.9.0",
        "caniuse-lite": "^1.0.30001759",
        "electron-to-chromium": "^1.5.263",
        "node-releases": "^2.0.27",
        "update-browserslist-db": "^1.2.0"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/camelcase-css": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/camelcase-css/-/camelcase-css-2.0.1.tgz",
      "integrity": "sha512-QOSvevhslijgYwRx6Rv7zKdMF8lbRmx+uQGx2+vDc+KI/eBnsy9kit5aj23AgGu3pa4t9AgwbnXWqS+iOY+2aA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001767",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001767.tgz",
      "integrity": "sha512-34+zUAMhSH+r+9eKmYG+k2Rpt8XttfE4yXAjoZvkAPs15xcYQhyBYdalJ65BzivAvGRMViEjy6oKr/S91loekQ==",
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/chokidar": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/chokidar/-/chokidar-3.6.0.tgz",
      "integrity": "sha512-7VT13fmjotKpGipCW9JEQAusEPE+Ei8nl6/g4FBAmIm0GOOLMua9NDDo/DWp0ZAxCr3cPq5ZpBqmPAQgDda2Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "engines": {
        "node": ">= 8.10.0"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/chokidar/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/client-only": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/client-only/-/client-only-0.0.1.tgz",
      "integrity": "sha512-IV3Ou0jSMzZrd3pZ48nLkT9DA7Ag1pnPzaiQhpW7c3RbcqqzvzzVu+L8gfqMp/8IM2MQtSiqaCxrrcfu8I8rMA==",
      "license": "MIT"
    },
    "node_modules/commander": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/commander/-/commander-4.1.1.tgz",
      "integrity": "sha512-NOKm8xhkzAjzFx8B2v5OAHT+u5pRQc2UCa2Vq9jYL/31o2wi9mxBA7LIFs3sV5VSC49z6pEhfbMULvShKj26WA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/cssesc": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/cssesc/-/cssesc-3.0.0.tgz",
      "integrity": "sha512-/Tb/JcjK111nNScGob5MNtsntNM1aCNUDipB/TkwZFhyDrrE47SOx/18wF2bbjgc3ZzCSKW1T5nt5EbFoAz/Vg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "cssesc": "bin/cssesc"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/csstype": {
      "version": "3.2.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.2.3.tgz",
      "integrity": "sha512-z1HGKcYy2xA8AGQfwrn0PAy+PB7X/GSj3UVJW9qKyn43xWa+gl5nXmU4qqLMRzWVLFC8KusUX8T/0kCiOYpAIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/detect-libc": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.1.2.tgz",
      "integrity": "sha512-Btj2BOOO83o3WyH59e8MgXsxEQVcarkUOpEYrubB0urwnN10yQ364rsiByU11nZlqWYZm05i/of7io4mzihBtQ==",
      "license": "Apache-2.0",
      "optional": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/didyoumean": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/didyoumean/-/didyoumean-1.2.2.tgz",
      "integrity": "sha512-gxtyfqMg7GKyhQmb056K7M3xszy/myH8w+B4RT+QXBQsvAOdc3XymqDDPHx1BgPgsdAA5SIifona89YtRATDzw==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/dlv": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/dlv/-/dlv-1.1.3.tgz",
      "integrity": "sha512-+HlytyjlPKnIG8XuRG8WvmBP8xs8P71y+SKKS6ZXWoEgLuePxtDoUEiH7WkdePWrQ5JBpE6aoVqfZfJUQkjXwA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.283",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.283.tgz",
      "integrity": "sha512-3vifjt1HgrGW/h76UEeny+adYApveS9dH2h3p57JYzBSXJIKUJAvtmIytDKjcSCt9xHfrNCFJ7gts6vkhuq++w==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/fast-glob": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
      "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fastq": {
      "version": "1.20.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.20.1.tgz",
      "integrity": "sha512-GGToxJ/w1x32s/D2EKND7kTil4n8OVk/9mycTc4VDza13lOvpUZTGX3mFSCtV9ksdGBVzvsyAVLM6mHFThxXxw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/fraction.js": {
      "version": "5.3.4",
      "resolved": "https://registry.npmjs.org/fraction.js/-/fraction.js-5.3.4.tgz",
      "integrity": "sha512-1X1NTtiJphryn/uLQz3whtY6jK3fTqoE3ohKs0tT+Ujr1W59oopxmoEh7Lu5p6vBaPbgoM0bzveAW4Qi5RyWDQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "*"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/rawify"
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/is-binary-path": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz",
      "integrity": "sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "binary-extensions": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-core-module": {
      "version": "2.16.1",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
      "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/jiti": {
      "version": "1.21.7",
      "resolved": "https://registry.npmjs.org/jiti/-/jiti-1.21.7.tgz",
      "integrity": "sha512-/imKNG4EbWNrVjoNC/1H5/9GFy+tqjGBHCaSsN+P2RnPqjsLmv6UD3Ej+Kj8nBWaRAwyk7kK5ZUc+OEatnTR3A==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jiti": "bin/jiti.js"
      }
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/leaflet": {
      "version": "1.9.4",
      "resolved": "https://registry.npmjs.org/leaflet/-/leaflet-1.9.4.tgz",
      "integrity": "sha512-nxS1ynzJOmOlHp+iL3FyWqK89GtNL8U8rvlMOsQdTTssxZwCXh8N2NB3GDQOL+YR3XnWyZAxwQixURb+FA74PA==",
      "license": "BSD-2-Clause"
    },
    "node_modules/lilconfig": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/lilconfig/-/lilconfig-3.1.3.tgz",
      "integrity": "sha512-/vlFKAoH5Cgt3Ie+JLhRbwOsCQePABiU3tJ1egGvyQ+33R/vcwM2Zl2QR/LzjsBeItPt3oSVXapn+m4nQDvpzw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/antonk52"
      }
    },
    "node_modules/lines-and-columns": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/lines-and-columns/-/lines-and-columns-1.2.4.tgz",
      "integrity": "sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lucide-react": {
      "version": "0.263.1",
      "resolved": "https://registry.npmjs.org/lucide-react/-/lucide-react-0.263.1.tgz",
      "integrity": "sha512-keqxAx97PlaEN89PXZ6ki1N8nRjGWtDa4021GFYLNj0RgruM5odbpl8GHTExj0hhPq3sF6Up0gnxt6TSHu+ovw==",
      "license": "ISC",
      "peerDependencies": {
        "react": "^16.5.1 || ^17.0.0 || ^18.0.0"
      }
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/micromatch/node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/mz": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/mz/-/mz-2.7.0.tgz",
      "integrity": "sha512-z81GNO7nnYMEhrGh9LeymoE4+Yr0Wn5McHIZMK5cfQCl+NDX08sCZgUc9/6MHni9IWuFLm1Z3HTCXu2z9fN62Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0",
        "object-assign": "^4.0.1",
        "thenify-all": "^1.0.0"
      }
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/next": {
      "version": "16.0.1",
      "resolved": "https://registry.npmjs.org/next/-/next-16.0.1.tgz",
      "integrity": "sha512-e9RLSssZwd35p7/vOa+hoDFggUZIUbZhIUSLZuETCwrCVvxOs87NamoUzT+vbcNAL8Ld9GobBnWOA6SbV/arOw==",
      "deprecated": "This version has a security vulnerability. Please upgrade to a patched version. See https://nextjs.org/blog/CVE-2025-66478 for more details.",
      "license": "MIT",
      "dependencies": {
        "@next/env": "16.0.1",
        "@swc/helpers": "0.5.15",
        "caniuse-lite": "^1.0.30001579",
        "postcss": "8.4.31",
        "styled-jsx": "5.1.6"
      },
      "bin": {
        "next": "dist/bin/next"
      },
      "engines": {
        "node": ">=20.9.0"
      },
      "optionalDependencies": {
        "@next/swc-darwin-arm64": "16.0.1",
        "@next/swc-darwin-x64": "16.0.1",
        "@next/swc-linux-arm64-gnu": "16.0.1",
        "@next/swc-linux-arm64-musl": "16.0.1",
        "@next/swc-linux-x64-gnu": "16.0.1",
        "@next/swc-linux-x64-musl": "16.0.1",
        "@next/swc-win32-arm64-msvc": "16.0.1",
        "@next/swc-win32-x64-msvc": "16.0.1",
        "sharp": "^0.34.4"
      },
      "peerDependencies": {
        "@opentelemetry/api": "^1.1.0",
        "@playwright/test": "^1.51.1",
        "babel-plugin-react-compiler": "*",
        "react": "^18.2.0 || 19.0.0-rc-de68d2f4-20241204 || ^19.0.0",
        "react-dom": "^18.2.0 || 19.0.0-rc-de68d2f4-20241204 || ^19.0.0",
        "sass": "^1.3.0"
      },
      "peerDependenciesMeta": {
        "@opentelemetry/api": {
          "optional": true
        },
        "@playwright/test": {
          "optional": true
        },
        "babel-plugin-react-compiler": {
          "optional": true
        },
        "sass": {
          "optional": true
        }
      }
    },
    "node_modules/next/node_modules/postcss": {
      "version": "8.4.31",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.4.31.tgz",
      "integrity": "sha512-PS08Iboia9mts/2ygV3eLpY5ghnUcfLV/EXTOW1E2qYxJKGGBUtNjN76FYHnMs36RmARn41bC0AZmn+rR0OVpQ==",
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.6",
        "picocolors": "^1.0.0",
        "source-map-js": "^1.0.2"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/node-releases": {
      "version": "2.0.27",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-hash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/object-hash/-/object-hash-3.0.0.tgz",
      "integrity": "sha512-RSn9F68PjH9HqtltsSnqYC1XXoWe9Bju5+213R98cNGttag9q9yAOTzdbsqvIa7aNm5WffBZFpWYr2aWrklWAw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/pify": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/pify/-/pify-2.3.0.tgz",
      "integrity": "sha512-udgsAY+fTnvv7kI7aaxbqwWNb0AHiB0qBO89PZKPkoTmGOgdbrHDKD+0B2X4uTfJ/FT1R09r9gTsjUjNJotuog==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/pirates": {
      "version": "4.0.7",
      "resolved": "https://registry.npmjs.org/pirates/-/pirates-4.0.7.tgz",
      "integrity": "sha512-TfySrs/5nm8fQJDcBDuUng3VOUKsd7S+zqvbOTiGXHfxX4wK31ard+hoNuvkicM/2YFzlpDgABOevKSsB4G/FA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/postcss-import": {
      "version": "15.1.0",
      "resolved": "https://registry.npmjs.org/postcss-import/-/postcss-import-15.1.0.tgz",
      "integrity": "sha512-hpr+J05B2FVYUAXHeK1YyI267J/dDDhMU6B6civm8hSY1jYJnBXxzKDKDswzJmtLHryrjhnDjqqp/49t8FALew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "postcss-value-parser": "^4.0.0",
        "read-cache": "^1.0.0",
        "resolve": "^1.1.7"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "postcss": "^8.0.0"
      }
    },
    "node_modules/postcss-js": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/postcss-js/-/postcss-js-4.1.0.tgz",
      "integrity": "sha512-oIAOTqgIo7q2EOwbhb8UalYePMvYoIeRY2YKntdpFQXNosSu3vLrniGgmH9OKs/qAkfoj5oB3le/7mINW1LCfw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "camelcase-css": "^2.0.1"
      },
      "engines": {
        "node": "^12 || ^14 || >= 16"
      },
      "peerDependencies": {
        "postcss": "^8.4.21"
      }
    },
    "node_modules/postcss-load-config": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/postcss-load-config/-/postcss-load-config-6.0.1.tgz",
      "integrity": "sha512-oPtTM4oerL+UXmx+93ytZVN82RrlY/wPUV8IeDxFrzIjXOLF1pN+EmKPLbubvKHT2HC20xXsCAH2Z+CKV6Oz/g==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "lilconfig": "^3.1.1"
      },
      "engines": {
        "node": ">= 18"
      },
      "peerDependencies": {
        "jiti": ">=1.21.0",
        "postcss": ">=8.0.9",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        },
        "postcss": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/postcss-nested": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/postcss-nested/-/postcss-nested-6.2.0.tgz",
      "integrity": "sha512-HQbt28KulC5AJzG+cZtj9kvKB93CFCdLvog1WFLf1D+xmMvPGlBstkpTEZfK5+AN9hfJocyBFCNiqyS48bpgzQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "postcss-selector-parser": "^6.1.1"
      },
      "engines": {
        "node": ">=12.0"
      },
      "peerDependencies": {
        "postcss": "^8.2.14"
      }
    },
    "node_modules/postcss-selector-parser": {
      "version": "6.1.2",
      "resolved": "https://registry.npmjs.org/postcss-selector-parser/-/postcss-selector-parser-6.1.2.tgz",
      "integrity": "sha512-Q8qQfPiZ+THO/3ZrOrO0cJJKfpYCagtMUkXbnEfmgUjwXg6z/WBeOyS9APBBPCTSiDV+s4SwQGu8yFsiMRIudg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cssesc": "^3.0.0",
        "util-deprecate": "^1.0.2"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/postcss-value-parser": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/postcss-value-parser/-/postcss-value-parser-4.2.0.tgz",
      "integrity": "sha512-1NNCs6uurfkVbeXG4S8JFT9t19m45ICnif8zWLd5oPSZ50QnwMfK+H3jv408d4jw/7Bttv5axS5IiHoLaVNHeQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/react": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react/-/react-18.3.1.tgz",
      "integrity": "sha512-wS+hAgJShR0KhEvPJArfuPVN1+Hz1t0Y6n5jLrGQbkb4urgPE/0Rve+1kMB1v/oWgHgm4WIcV+i7F2pTVj+2iQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-18.3.1.tgz",
      "integrity": "sha512-5m4nQKp+rZRb09LNH59GM4BxTh9251/ylbKIbpe7TpGxfJ+9kv6BLkLBXIjjspbgbnIBNqlI23tRnTWT0snUIw==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0",
        "scheduler": "^0.23.2"
      },
      "peerDependencies": {
        "react": "^18.3.1"
      }
    },
    "node_modules/react-leaflet": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/react-leaflet/-/react-leaflet-4.2.1.tgz",
      "integrity": "sha512-p9chkvhcKrWn/H/1FFeVSqLdReGwn2qmiobOQGO3BifX+/vV/39qhY8dGqbdcPh1e6jxh/QHriLXr7a4eLFK4Q==",
      "license": "Hippocratic-2.1",
      "dependencies": {
        "@react-leaflet/core": "^2.1.0"
      },
      "peerDependencies": {
        "leaflet": "^1.9.0",
        "react": "^18.0.0",
        "react-dom": "^18.0.0"
      }
    },
    "node_modules/read-cache": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/read-cache/-/read-cache-1.0.0.tgz",
      "integrity": "sha512-Owdv/Ft7IjOgm/i0xvNDZ1LrRANRfew4b2prF3OWMQLxLfu3bS8FVhCsrSCMK4lR56Y9ya+AThoTpDCTxCmpRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "pify": "^2.3.0"
      }
    },
    "node_modules/readdirp": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz",
      "integrity": "sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "picomatch": "^2.2.1"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/readdirp/node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/resolve": {
      "version": "1.22.11",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.11.tgz",
      "integrity": "sha512-RfqAvLnMl313r7c9oclB1HhUEAezcpLjz95wFH4LVuhk9JF/r22qmVP9AMmOU4vMX7Q8pN8jwNg/CSpdFnMjTQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.16.1",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/scheduler": {
      "version": "0.23.2",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.23.2.tgz",
      "integrity": "sha512-UOShsPwz7NrMUqhR6t0hWjFduvOzbtv7toDH1/hIrfRNIDBnnBWd0CwJTGvTpngVlmwGCdP9/Zl/tVrDqcuYzQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      }
    },
    "node_modules/semver": {
      "version": "7.7.4",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.4.tgz",
      "integrity": "sha512-vFKC2IEtQnVhpT78h1Yp8wzwrf8CM+MzKMHGJZfBtzhZNycRFnXsHk6E5TxIkkMsgNS7mdX3AGB7x2QM2di4lA==",
      "license": "ISC",
      "optional": true,
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/sharp": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/sharp/-/sharp-0.34.5.tgz",
      "integrity": "sha512-Ou9I5Ft9WNcCbXrU9cMgPBcCK8LiwLqcbywW3t4oDV37n1pzpuNLsYiAV8eODnjbtQlSDwZ2cUEeQz4E54Hltg==",
      "hasInstallScript": true,
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "@img/colour": "^1.0.0",
        "detect-libc": "^2.1.2",
        "semver": "^7.7.3"
      },
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-darwin-arm64": "0.34.5",
        "@img/sharp-darwin-x64": "0.34.5",
        "@img/sharp-libvips-darwin-arm64": "1.2.4",
        "@img/sharp-libvips-darwin-x64": "1.2.4",
        "@img/sharp-libvips-linux-arm": "1.2.4",
        "@img/sharp-libvips-linux-arm64": "1.2.4",
        "@img/sharp-libvips-linux-ppc64": "1.2.4",
        "@img/sharp-libvips-linux-riscv64": "1.2.4",
        "@img/sharp-libvips-linux-s390x": "1.2.4",
        "@img/sharp-libvips-linux-x64": "1.2.4",
        "@img/sharp-libvips-linuxmusl-arm64": "1.2.4",
        "@img/sharp-libvips-linuxmusl-x64": "1.2.4",
        "@img/sharp-linux-arm": "0.34.5",
        "@img/sharp-linux-arm64": "0.34.5",
        "@img/sharp-linux-ppc64": "0.34.5",
        "@img/sharp-linux-riscv64": "0.34.5",
        "@img/sharp-linux-s390x": "0.34.5",
        "@img/sharp-linux-x64": "0.34.5",
        "@img/sharp-linuxmusl-arm64": "0.34.5",
        "@img/sharp-linuxmusl-x64": "0.34.5",
        "@img/sharp-wasm32": "0.34.5",
        "@img/sharp-win32-arm64": "0.34.5",
        "@img/sharp-win32-ia32": "0.34.5",
        "@img/sharp-win32-x64": "0.34.5"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/styled-jsx": {
      "version": "5.1.6",
      "resolved": "https://registry.npmjs.org/styled-jsx/-/styled-jsx-5.1.6.tgz",
      "integrity": "sha512-qSVyDTeMotdvQYoHWLNGwRFJHC+i+ZvdBRYosOFgC+Wg1vx4frN2/RG/NA7SYqqvKNLf39P2LSRA2pu6n0XYZA==",
      "license": "MIT",
      "dependencies": {
        "client-only": "0.0.1"
      },
      "engines": {
        "node": ">= 12.0.0"
      },
      "peerDependencies": {
        "react": ">= 16.8.0 || 17.x.x || ^18.0.0-0 || ^19.0.0-0"
      },
      "peerDependenciesMeta": {
        "@babel/core": {
          "optional": true
        },
        "babel-plugin-macros": {
          "optional": true
        }
      }
    },
    "node_modules/sucrase": {
      "version": "3.35.1",
      "resolved": "https://registry.npmjs.org/sucrase/-/sucrase-3.35.1.tgz",
      "integrity": "sha512-DhuTmvZWux4H1UOnWMB3sk0sbaCVOoQZjv8u1rDoTV0HTdGem9hkAZtl4JZy8P2z4Bg0nT+YMeOFyVr4zcG5Tw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.2",
        "commander": "^4.0.0",
        "lines-and-columns": "^1.1.6",
        "mz": "^2.7.0",
        "pirates": "^4.0.1",
        "tinyglobby": "^0.2.11",
        "ts-interface-checker": "^0.1.9"
      },
      "bin": {
        "sucrase": "bin/sucrase",
        "sucrase-node": "bin/sucrase-node"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/tailwindcss": {
      "version": "3.4.19",
      "resolved": "https://registry.npmjs.org/tailwindcss/-/tailwindcss-3.4.19.tgz",
      "integrity": "sha512-3ofp+LL8E+pK/JuPLPggVAIaEuhvIz4qNcf3nA1Xn2o/7fb7s/TYpHhwGDv1ZU3PkBluUVaF8PyCHcm48cKLWQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@alloc/quick-lru": "^5.2.0",
        "arg": "^5.0.2",
        "chokidar": "^3.6.0",
        "didyoumean": "^1.2.2",
        "dlv": "^1.1.3",
        "fast-glob": "^3.3.2",
        "glob-parent": "^6.0.2",
        "is-glob": "^4.0.3",
        "jiti": "^1.21.7",
        "lilconfig": "^3.1.3",
        "micromatch": "^4.0.8",
        "normalize-path": "^3.0.0",
        "object-hash": "^3.0.0",
        "picocolors": "^1.1.1",
        "postcss": "^8.4.47",
        "postcss-import": "^15.1.0",
        "postcss-js": "^4.0.1",
        "postcss-load-config": "^4.0.2 || ^5.0 || ^6.0",
        "postcss-nested": "^6.2.0",
        "postcss-selector-parser": "^6.1.2",
        "resolve": "^1.22.8",
        "sucrase": "^3.35.0"
      },
      "bin": {
        "tailwind": "lib/cli.js",
        "tailwindcss": "lib/cli.js"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/thenify": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/thenify/-/thenify-3.3.1.tgz",
      "integrity": "sha512-RVZSIV5IG10Hk3enotrhvz0T9em6cyHBLkH/YAZuKqd8hRkKhSfCGIcP2KUY0EPxndzANBmNllzWPwak+bheSw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0"
      }
    },
    "node_modules/thenify-all": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/thenify-all/-/thenify-all-1.6.0.tgz",
      "integrity": "sha512-RNxQH/qI8/t3thXJDwcstUO4zeqo64+Uy/+sNVRBx4Xn2OX+OZ9oP+iJnNFqplFra2ZUVeKCSa2oVWi3T4uVmA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "thenify": ">= 3.1.0 < 4"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/tinyglobby": {
      "version": "0.2.15",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/ts-interface-checker": {
      "version": "0.1.13",
      "resolved": "https://registry.npmjs.org/ts-interface-checker/-/ts-interface-checker-0.1.13.tgz",
      "integrity": "sha512-Y/arvbn+rrz3JCKl9C4kVNfTfSm2/mEp5FSz5EsZSANGPSlQrpRI5M4PKF+mJnE52jOO90PnPSc3Ur3bTQw0gA==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
      "license": "0BSD"
    },
    "node_modules/typescript": {
      "version": "5.9.3",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.9.3.tgz",
      "integrity": "sha512-jl1vZzPDinLr9eUt3J/t7V6FgNEw9QjvBPdysz9KfQDD41fQrC2Y4vKQdiaUpFT4bXlb1RHhLpp8wtm6M5TgSw==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/undici-types": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.21.0.tgz",
      "integrity": "sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/update-browserslist-db": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.2.3.tgz",
      "integrity": "sha512-Js0m9cx+qOgDxo0eMiFGEueWztz+d4+M3rGlmKPT+T4IS/jP4ylw3Nwpu6cpTTP8R1MAC1kF4VbdLt3ARf209w==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==",
      "dev": true,
      "license": "MIT"
    }
  }
}



